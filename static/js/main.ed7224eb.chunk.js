(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{129:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var i=n(14),r=n(76),a=n(140),c=n(77),o=a.b?["DWoSTuBwY2io8q2LdmeUBJbXJGByXiGUasPp141Rry82"]:["BrtEPrAjtPRL99sdMAydvbP2hkgZz2W6SGEeg4giCYnU"],s=r.d.publicKey.findProgramAddressSync([e.from("vault_token_in"),c.b.toBytes()],c.a),l=Object(i.a)(s,1)[0];console.log("VAULT_TOKEN_IN: ".concat(l.toBase58()));var u=r.d.publicKey.findProgramAddressSync([e.from("vault_token_out"),c.b.toBytes()],c.a),d=Object(i.a)(u,1)[0];console.log("VAULT_TOKEN_OUT = ".concat(d.toBase58()))}).call(this,n(7).Buffer)},140:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i=!0,r=5e3},163:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return x})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"d",(function(){return k}));var i=n(11),r=n(20),a=n(16),c=n(1),o=n.n(c),s=n(14),l=n(4),u=n(76),d=n(110),p=n(32),m=n(21),f=n(79),j=n(68),b=n(287),h=n(288),x=function(){var t=Object(l.a)(o.a.mark((function t(n,i,r){var a,c,l,u,p,j,b;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.PublicKey.findProgramAddress([n.toBytes(),e.from("proceeds")],i.programId);case 2:return a=t.sent,c=Object(s.a)(a,1),l=c[0],t.next=7,r.getAccountInfo(l);case 7:if(u=t.sent){t.next=10;break}throw Error("Failed to fetch proceeds account");case 10:if(p=Object(d.parseTokenAccount)(u.data),j=f.b.get(p.mint.toString())){t.next=14;break}throw Error("Info not found for proceeds account mint ".concat(p.mint.toString()));case 14:return b={name:j.name,publicKey:p.mint,logoUrl:j.logoURI,symbol:j.symbol,decimals:j.decimals},t.abrupt("return",{address:l,mintInfo:b});case 16:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),g=function(){var t=Object(l.a)(o.a.mark((function t(n,i,r){var a,c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.PublicKey.findProgramAddress([n.toBuffer(),e.from("prize"),new p.u64(i).toArrayLike(e,"le",4)],r);case 2:return a=t.sent,c=Object(s.a)(a,1),l=c[0],t.abrupt("return",l);case 6:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(t,n,i){var c,l,u,p,m,f,j,h,x,O,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],e.next=3,Promise.all(Object(a.a)(Array(i).keys()).map((function(e){return g(t,e,n.programId)})));case 3:return l=e.sent,e.next=6,n.provider.connection.getMultipleAccountsInfo(l);case 6:return u=e.sent,p=u.map((function(e){if(!e)throw new Error("Invalid prize account");return Object(d.parseTokenAccount)(e.data)})),e.next=10,Promise.all(p.map((function(e){return Object(b.a)(e.mint)})));case 10:return m=e.sent,e.next=13,n.provider.connection.getMultipleAccountsInfo(m);case 13:f=e.sent,j=Object(r.a)(p.entries()),e.prev=15,j.s();case 17:if((h=j.n()).done){e.next=26;break}return x=Object(s.a)(h.value,2),O=x[0],y=x[1],e.t0=c,e.next=22,v(l[O],y,f[O]);case 22:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 24:e.next=17;break;case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(15),j.e(e.t2);case 31:return e.prev=31,j.f(),e.finish(31);case 34:return e.abrupt("return",c);case 35:case"end":return e.stop()}}),e,null,[[15,28,31,34]])})));return function(t,n,i){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(o.a.mark((function e(t,n,i){var r,a,c,s,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=f.b.get(n.mint.toString()))){e.next=8;break}return s="".concat(Object(j.c)(n.amount,a)," ").concat(a.symbol),l=null===a||void 0===a||null===(c=a.extensions)||void 0===c?void 0:c.imageURI,r={name:s,publicKey:n.mint,logoUrl:a.logoURI,symbol:a.symbol,decimals:a.decimals},e.abrupt("return",{address:t,mint:r,amount:n.amount,type:h.a.FT,meta:{imageUri:l||a.logoURI}});case 8:if(!i){e.next=14;break}return e.next=11,Object(b.b)(i);case 11:e.t0=e.sent,e.next=15;break;case 14:e.t0=void 0;case 15:return u=e.t0,d=f.a,r={name:(null===u||void 0===u?void 0:u.name)||d.name,publicKey:n.mint,logoUrl:(null===u||void 0===u?void 0:u.image)||d.logoURI,symbol:d.symbol,decimals:d.decimals},e.abrupt("return",{address:t,mint:r,amount:n.amount,type:h.a.NFTPicture,meta:{name:(null===u||void 0===u?void 0:u.name)||d.name,imageUri:(null===u||void 0===u?void 0:u.image)||d.name}});case 19:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),y=function(e){return e.entrants.slice(0,e.total).reduce((function(e,t,n){var i=e.get(t.toBase58());return i?i.tickets.push(n):e.set(t.toBase58(),{publicKey:t,tickets:[n]}),e}),new Map)},w=function(e,t){for(var n=e.coder.accounts.decode("entrants",t),r=[],a=t.subarray(16),c=0;c<n.max;c++)r.push(new m.PublicKey(a.slice(32*c,32*(c+1))));return Object(i.a)(Object(i.a)({},n),{},{entrants:r})},k=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,i,r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.provider.connection.getProgramAccounts(t.programId);case 2:return n=e.sent,i=u.b.accountDiscriminator("Raffle"),r=u.b.accountDiscriminator("Entrants"),a=[],c=[],n.forEach((function(e){var n=e.pubkey,o=e.account,s=o.data.slice(0,8);0===i.compare(s)?a.push({publicKey:n,account:t.coder.accounts.decode("raffle",o.data)}):0===r.compare(s)?c.push({publicKey:n,account:w(t,o.data)}):console.log("Could not decode ".concat(n.toBase58()))})),e.abrupt("return",{raffleDataRawProgramAccounts:a,entrantsDataProgramAccounts:c});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(7).Buffer)},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=new(n(21).PublicKey)("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s")},287:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return C}));var i=n(1),r=n.n(i),a=n(4),c=n(9),o=n(6),s=n(182),l=n(60),u=n(21),d=n(402);Object(d.a)();var p,m,f="metadata",j="edition";!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.MetadataV1=4]="MetadataV1",e[e.EditionV1=1]="EditionV1",e[e.MasterEditionV1=2]="MasterEditionV1",e[e.MasterEditionV2=6]="MasterEditionV2",e[e.EditionMarker=7]="EditionMarker"}(p||(p={})),function(e){e.Audio="audio",e.Video="video",e.Image="image",e.VR="vr"}(m||(m={}));var b=function(){function e(t){Object(o.a)(this,e),this.key=void 0,this.ledger=void 0,this.key=p.EditionMarker,this.ledger=t.ledger}return Object(c.a)(e,[{key:"editionTaken",value:function(e){var t=e%248,n=Math.floor(t/8);if(n>30)throw Error("bad index for edition");var i=7-t%8,r=Math.pow(2,i);return 0!==(this.ledger[n]&r)}}]),e}(),h=function e(t){Object(o.a)(this,e),this.address=void 0,this.verified=void 0,this.share=void 0,this.address=t.address,this.verified=t.verified,this.share=t.share},x=function e(t){Object(o.a)(this,e),this.name=void 0,this.symbol=void 0,this.uri=void 0,this.sellerFeeBasisPoints=void 0,this.creators=void 0,this.name=t.name,this.symbol=t.symbol,this.uri=t.uri,this.sellerFeeBasisPoints=t.sellerFeeBasisPoints,this.creators=t.creators},g=function(){function e(t){Object(o.a)(this,e),this.key=void 0,this.updateAuthority=void 0,this.mint=void 0,this.data=void 0,this.primarySaleHappened=void 0,this.isMutable=void 0,this.editionNonce=void 0,this.masterEdition=void 0,this.edition=void 0,this.key=p.MetadataV1,this.updateAuthority=t.updateAuthority,this.mint=t.mint,this.data=t.data,this.primarySaleHappened=t.primarySaleHappened,this.isMutable=t.isMutable,this.editionNonce=t.editionNonce}return Object(c.a)(e,[{key:"init",value:function(){var e=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(this.mint);case 2:t=e.sent,this.edition=t,this.masterEdition=t;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),O=new Map([[function e(t){Object(o.a)(this,e),this.instruction=0,this.data=void 0,this.isMutable=void 0,this.data=t.data,this.isMutable=t.isMutable},{kind:"struct",fields:[["instruction","u8"],["data",x],["isMutable","u8"]]}],[function e(t){Object(o.a)(this,e),this.instruction=1,this.data=void 0,this.updateAuthority=void 0,this.primarySaleHappened=void 0,this.data=t.data?t.data:null,this.updateAuthority=t.updateAuthority?t.updateAuthority:null,this.primarySaleHappened=t.primarySaleHappened},{kind:"struct",fields:[["instruction","u8"],["data",{kind:"option",type:x}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}]]}],[function e(t){Object(o.a)(this,e),this.instruction=10,this.maxSupply=void 0,this.maxSupply=t.maxSupply},{kind:"struct",fields:[["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]}],[function e(t){Object(o.a)(this,e),this.instruction=9,this.supply=void 0,this.supply=t.supply},{kind:"struct",fields:[["instruction","u8"],["supply","u64"]]}],[function e(t){Object(o.a)(this,e),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.printingMint=void 0,this.oneTimePrintingAuthorizationMint=void 0,this.key=p.MasterEditionV1,this.supply=t.supply,this.maxSupply=t.maxSupply,this.printingMint=t.printingMint,this.oneTimePrintingAuthorizationMint=t.oneTimePrintingAuthorizationMint},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}],["printingMint","pubkeyAsString"],["oneTimePrintingAuthorizationMint","pubkeyAsString"]]}],[function e(t){Object(o.a)(this,e),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.key=p.MasterEditionV2,this.supply=t.supply,this.maxSupply=t.maxSupply},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}]]}],[function e(t){Object(o.a)(this,e),this.key=void 0,this.parent=void 0,this.edition=void 0,this.key=p.EditionV1,this.parent=t.parent,this.edition=t.edition},{kind:"struct",fields:[["key","u8"],["parent","pubkeyAsString"],["edition","u64"]]}],[x,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[h]}]]}],[h,{kind:"struct",fields:[["address","pubkeyAsString"],["verified","u8"],["share","u8"]]}],[g,{kind:"struct",fields:[["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",x],["primarySaleHappened","u8"],["isMutable","u8"]]}],[b,{kind:"struct",fields:[["key","u8"],["ledger",[31]]]}]]),v=new RegExp("\0","g"),y=function(e){var t=Object(l.deserializeUnchecked)(O,g,e);return t.data.name=t.data.name.replace(v,""),t.data.uri=t.data.uri.replace(v,""),t.data.symbol=t.data.symbol.replace(v,""),t};function w(e){return k.apply(this,arguments)}function k(){return(k=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.PublicKey.findProgramAddress([e.from(f),s.a.toBuffer(),new u.PublicKey(n).toBuffer(),e.from(j)],s.a);case 2:return t.abrupt("return",t.sent[0].toBase58());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(e){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.PublicKey.findProgramAddress([e.from(f),s.a.toBuffer(),n.toBuffer()],s.a);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(e){return I.apply(this,arguments)}function I(){return(I=Object(a.a)(r.a.mark((function e(t){var n,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y(t.data),e.prev=1,e.next=4,fetch(n.data.uri);case 4:return i=e.sent,e.next=7,i.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}}).call(this,n(7).Buffer)},288:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.FT="FT",e.NFTPicture="NFTPicture"}(i||(i={}))},402:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(21),r=n(60),a=n(22),c=n.n(a),o=function(){r.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new i.PublicKey(e)},r.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},r.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return c.a.encode(e)},r.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(c.a.decode(e))}}},410:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var i=n(49),r=n.n(i),a=n(73);function c(t,n){var i=a.keccak_256.create();return i.update(new Uint8Array(t)),i.update(new r.a(n).toArrayLike(e,"le",4)),new r.a(i.digest().slice(0,4),"le").toNumber()}}).call(this,n(7).Buffer)},437:function(e,t,n){},438:function(e,t){},440:function(e,t){},447:function(e,t){},462:function(e,t){},463:function(e,t){},482:function(e,t){},483:function(e,t){},485:function(e,t){},493:function(e,t){},499:function(e,t){},515:function(e,t){},519:function(e,t,n){},560:function(e,t){},562:function(e,t){},576:function(e,t){},580:function(e,t){},582:function(e,t){},592:function(e,t){},594:function(e,t){},621:function(e,t){},623:function(e,t){},628:function(e,t){},630:function(e,t){},637:function(e,t){},638:function(e,t){},640:function(e,t){},652:function(e,t){},655:function(e,t){},666:function(e,t){},667:function(e,t,n){},668:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),a=n(42),c=n.n(a),o=(n(437),n(738)),s=n(211),l=n(65),u=n(31),d="/admin_panel",p={HOME:"/",RAFFLES:"/raffles",STAKE:"/stake",TOOLS:"/tools",ADMIN:{HOME:"".concat(d,"/"),RAFFLES:"".concat(d,"/raffles")}},m=n(16),f=n(14),j=n(421),b=n(725),h=n(724),x=n(46),g=n(11),O=n(52),v=n(703),y=n(706),w=n(707),k=n(744),S=n(710),N=n(705),C=n(711),I=n(130),T=n.n(I),P=n(32),z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toString(),i=n.length;return"".concat(n.substr(0,t),"...").concat(n.substr(i-t,i))};var M,R=function(e){return new Promise((function(t){return setTimeout(t,e)}))},A=n(701),B=Object(A.a)((function(e){return{root:{display:"flex",flexDirection:"row",width:"100%",maxWidth:"900px",justifyContent:"space-between"}}})),D=n(3),E=function(e){var t=e.endTimestamp,n=e.spacing,r=void 0===n?"0px":n,a=e.className,c=Object(O.a)(e,["endTimestamp","spacing","className"]),o=B(),s=Object(i.useState)(new Date),l=Object(f.a)(s,2),u=l[0],d=l[1],p=Object(i.useState)(!1),m=Object(f.a)(p,2),j=m[0],b=m[1],h=Object(i.useMemo)((function(){return function(e,t){var n=t.getTime()-e.getTime();return n<0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(n/864e5),hours:Math.floor(n%864e5/36e5),minutes:Math.floor(n%36e5/6e4),seconds:Math.floor(n%6e4/1e3)}}(u,t)}),[u,t]),x=h.days,v=h.hours,y=h.minutes,w=h.seconds;return Object(i.useEffect)((function(){d(new Date);var e=setInterval((function(e){1e3*(new Date).getTime()-e>.2&&d(new Date)}),1e3,1e3*(new Date).getTime());return function(){return clearInterval(e)}}),[d]),j?Object(D.jsxs)("div",Object(g.a)(Object(g.a)({className:"".concat(o.root," ").concat(a)},c),{},{children:[Object(D.jsx)("span",{style:{marginRight:r},children:x}),":",Object(D.jsx)("span",{style:{marginRight:r,marginLeft:r},children:v.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}),":",Object(D.jsx)("span",{style:{marginRight:r,marginLeft:r},children:y.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}),":",Object(D.jsx)("span",{style:{marginLeft:r},children:w.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})})]})):Object(D.jsxs)("div",Object(g.a)(Object(g.a)({className:"".concat(o.root," ").concat(a)},c),{},{children:[Object(D.jsx)("div",{style:{marginRight:r},children:Object(D.jsx)(T.a,{start:0,end:x,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},children:function(e){var t=e.countUpRef;return Object(D.jsx)("span",{ref:t})}})}),":",Object(D.jsx)("div",{style:{marginRight:r,marginLeft:r},children:Object(D.jsx)(T.a,{start:0,end:v,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},formattingFn:function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},children:function(e){var t=e.countUpRef;return Object(D.jsx)("span",{ref:t})}})}),":",Object(D.jsx)("div",{style:{marginRight:r,marginLeft:r},children:Object(D.jsx)(T.a,{start:0,end:y,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},formattingFn:function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},children:function(e){var t=e.countUpRef;return Object(D.jsx)("span",{ref:t})}})}),":",Object(D.jsx)("div",{style:{marginLeft:r},children:Object(D.jsx)(T.a,{start:0,end:w,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},formattingFn:function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},children:function(e){var t=e.countUpRef;return Object(D.jsx)("span",{ref:t})}})})]}))},K=n(68),L=Object(A.a)((function(e){return{root:function(e){e.device;return{height:"420px",width:"280px",position:"relative",cursor:"pointer","&:hover":{boxShadow:"0 3px 10px 0 #111",transform:"scale3d(1.02, 1.02, 1)"},"&:active":{transform:"scale3d(1, 1, 1)"}}},media:{height:"250px",minHeight:"250px"},raffleInfo:{display:"flex",flexDirection:"column",justifyContent:"center",fontSize:"18px",padding:"15px"},cardLabel:{fontSize:"15px"},detailsRow1:{color:e.palette.primary.main,fontWeight:"bold",textTransform:"uppercase",marginBottom:"10px"},detailsRow2:{color:e.palette.common.white,display:"flex",flexDirection:"row",width:"100%",marginBottom:"10px"},detailsRow3:{color:e.palette.common.white,display:"flex",flexDirection:"row",width:"100%"},label:{fontSize:"10px",color:"#777"},ticketsSold:{width:"50%"},endingIn:{width:"50%"},ticketPrice:{width:"80%"},goToRaffle:{color:"white","&:hover":{backgroundColor:"transparent"}},cardPrizesBadge:{fontSize:"12px",fontWeight:"bold",width:"80px",textAlign:"center",padding:"2px",position:"absolute",top:"5px",left:"5px",color:"black",backgroundColor:e.palette.secondary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"},cardEndedBadge:{fontSize:"12px",fontWeight:"bold",width:"50px",textAlign:"center",padding:"2px",position:"absolute",top:"5px",right:"5px",color:"white",backgroundColor:e.palette.primary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"}}}));!function(e){e[e.Phone=0]="Phone",e[e.Tablet=1]="Tablet",e[e.Desktop=2]="Desktop"}(M||(M={}));var F=r.a.createContext(),U=function(e){var t=e.children,n=r.a.useState(M.Desktop),i=Object(f.a)(n,2),a=i[0],c=i[1];return r.a.useEffect((function(){var e=function(){window.innerWidth<600&&a!==M.Phone?c(M.Phone):window.innerWidth<768&&a!==M.Tablet?c(M.Tablet):window.innerWidth>=768&&a!==M.Desktop&&c(M.Desktop)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(D.jsx)(F.Provider,{value:{device:a},children:t})},G=function(){var e=Object(i.useContext)(F);if(void 0===e)throw new Error("useViewport must be used within an ViewportContext");return e},W=function(e){var t=e.raffle,n=e.className,r=Object(O.a)(e,["raffle","className"]),a=G().device,c=L({device:a}),o=Object(u.f)().push,s=Object(i.useState)(!1),l=Object(f.a)(s,2),d=l[0],m=l[1],j=Object(i.useState)(!1),b=Object(f.a)(j,2),h=b[0],x=b[1];if(Object(i.useEffect)((function(){var e=setInterval((function(){return m(new Date<t.endTimestamp)}),1e3);return function(){return clearInterval(e)}}),[t,m]),0===t.prizes.length)return null;var I=t.prizes[0],T=t.metadata.overviewImageUri?t.metadata.overviewImageUri:I.meta.imageUri;return Object(D.jsxs)(v.a,Object(g.a)(Object(g.a)({onClick:function(){o("".concat(p.RAFFLES,"/").concat(t.publicKey))},className:"".concat(c.root," ").concat(n)},r),{},{children:[Object(D.jsxs)("div",{className:c.cardPrizesBadge,children:[t.prizes.length," prize",t.prizes.length>1&&"s"]}),new Date>t.endTimestamp&&Object(D.jsx)("div",{className:c.cardEndedBadge,children:"Ended"}),!h&&Object(D.jsx)(N.a,{variant:"rect",animation:"wave",classes:{root:c.media}}),Object(D.jsx)(y.a,{component:"img",className:c.media,src:T,alt:I.mint.name,style:h?{}:{display:"none"},onLoad:function(){return x(!0)}}),Object(D.jsxs)(w.a,{className:c.raffleInfo,children:[Object(D.jsx)("div",{className:c.detailsRow1,children:t.metadata.name.length>20?Object(D.jsx)(k.a,{title:t.metadata.name,placement:"top",children:Object(D.jsxs)("div",{children:[t.metadata.name.slice(0,16)," ..."]})}):t.metadata.name}),Object(D.jsxs)("div",{className:c.detailsRow2,children:[Object(D.jsxs)("div",{className:c.ticketsSold,children:[Object(D.jsx)("div",{className:c.label,children:Object(D.jsx)("span",{className:c.cardLabel,children:"Tickets sold"})}),t.totalTickets]}),Object(D.jsxs)("div",{className:c.endingIn,children:[Object(D.jsx)("div",{className:c.label,children:Object(D.jsx)("span",{className:c.cardLabel,children:"Ending in"})}),d?Object(D.jsx)(E,{endTimestamp:t.endTimestamp}):"-"]})]}),Object(D.jsxs)("div",{className:c.detailsRow3,children:[Object(D.jsxs)("div",{className:c.ticketPrice,children:[Object(D.jsx)("div",{className:c.label,children:Object(D.jsx)("span",{className:c.cardLabel,children:"Ticket price"})}),Object(K.c)(t.proceeds.ticketPrice,t.proceeds.mint)," ",t.proceeds.mint.symbol]}),Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{className:c.goToRaffle,children:Object(D.jsx)(C.a,{})})})]})]})]}))},H=Object(A.a)((function(e){return{rafflesGrid:{display:"flex",flexGrow:"initial",width:"100%"},titleBar:function(e){return{marginBottom:e.device===M.Phone?"20px":"50px"}},mainContent:{marginTop:"100px",textAlign:"center"},raffleCardContainer:function(e){return{margin:e.device===M.Phone?"0 10px 20px 10px":"0 40px 50px 40px"}}}})),V=n(1),_=n.n(V),Y=n(4),J=n(21),Q=n(76),q=n(6),X=n(9),Z=function(){function e(){Object(q.a)(this,e),this.publicKey=void 0}return Object(X.a)(e,[{key:"signTransaction",value:function(){var e=Object(Y.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=Object(Y.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=function(){var e=Object(Y.a)(_.a.mark((function e(t,n){var i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return i=e.sent,console.log("Success:",i),l.b.success(n),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.t0.msg?l.b.error("Transaction failed: ".concat(e.t0.msg)):l.b.error("Unexpected error"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),ee={version:"0.1.0",name:"draffle",instructions:[{name:"createRaffle",accounts:[{name:"raffle",isMut:!0,isSigner:!1},{name:"entrants",isMut:!0,isSigner:!1},{name:"creator",isMut:!0,isSigner:!0},{name:"proceeds",isMut:!0,isSigner:!1},{name:"proceedsMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"endTimestamp",type:"i64"},{name:"ticketPrice",type:"u64"},{name:"maxEntrants",type:"u32"}]},{name:"addPrize",accounts:[{name:"raffle",isMut:!0,isSigner:!1},{name:"creator",isMut:!0,isSigner:!0},{name:"from",isMut:!0,isSigner:!1},{name:"prize",isMut:!0,isSigner:!1},{name:"prizeMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"prizeIndex",type:"u32"},{name:"amount",type:"u64"}]},{name:"buyTickets",accounts:[{name:"raffle",isMut:!1,isSigner:!1},{name:"entrants",isMut:!0,isSigner:!1},{name:"proceeds",isMut:!0,isSigner:!1},{name:"buyerTokenAccount",isMut:!0,isSigner:!1},{name:"buyerTransferAuthority",isMut:!1,isSigner:!0},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u32"}]},{name:"revealWinners",accounts:[{name:"raffle",isMut:!0,isSigner:!1},{name:"recentBlockhashes",isMut:!1,isSigner:!1}],args:[]},{name:"claimPrize",accounts:[{name:"raffle",isMut:!0,isSigner:!1},{name:"entrants",isMut:!1,isSigner:!1},{name:"prize",isMut:!0,isSigner:!1},{name:"winnerTokenAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"prizeIndex",type:"u32"},{name:"ticketIndex",type:"u32"}]},{name:"collectProceeds",accounts:[{name:"raffle",isMut:!1,isSigner:!1},{name:"proceeds",isMut:!0,isSigner:!1},{name:"creator",isMut:!1,isSigner:!0},{name:"creatorProceeds",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"closeEntrants",accounts:[{name:"raffle",isMut:!1,isSigner:!1},{name:"entrants",isMut:!0,isSigner:!1},{name:"creator",isMut:!1,isSigner:!0}],args:[]}],accounts:[{name:"raffle",type:{kind:"struct",fields:[{name:"creator",type:"publicKey"},{name:"totalPrizes",type:"u32"},{name:"claimedPrizes",type:"u32"},{name:"randomness",type:{option:{array:["u8",32]}}},{name:"endTimestamp",type:"i64"},{name:"ticketPrice",type:"u64"},{name:"entrants",type:"publicKey"}]}},{name:"entrants",type:{kind:"struct",fields:[{name:"total",type:"u32"},{name:"max",type:"u32"}]}}],errors:[{code:6e3,name:"MaxEntrantsTooLarge",msg:"Max entrants is too large"},{code:6001,name:"RaffleEnded",msg:"Raffle has ended"},{code:6002,name:"InvalidPrizeIndex",msg:"Invalid prize index"},{code:6003,name:"NoPrize",msg:"No prize"},{code:6004,name:"InvalidCalculation",msg:"Invalid calculation"},{code:6005,name:"NotEnoughTicketsLeft",msg:"Not enough tickets left"},{code:6006,name:"RaffleStillRunning",msg:"Raffle is still running"},{code:6007,name:"WinnersAlreadyDrawn",msg:"Winner already drawn"},{code:6008,name:"WinnerNotDrawn",msg:"Winner not drawn"},{code:6009,name:"InvalidRevealedData",msg:"Invalid revealed data"},{code:6010,name:"TokenAccountNotOwnedByWinner",msg:"Ticket account not owned by winner"},{code:6011,name:"TicketHasNotWon",msg:"Ticket has not won"},{code:6012,name:"UnclaimedPrizes",msg:"Unclaimed prizes"},{code:6013,name:"InvalidRecentBlockhashes",msg:"Invalid recent blockhashes"},{code:6014,name:"OnlyCreatorCanClaimNoEntrantRafflePrizes",msg:"Only the creator can calin no entrant raffle prizes"},{code:6015,name:"InvalidTreasuryTokenAccountOwner",msg:"Invalid treasury token account owner"}]},te={version:"0.1.0",name:"dispenser",instructions:[{name:"createRegistry",accounts:[{name:"registry",isMut:!0,isSigner:!0},{name:"vaultTokenIn",isMut:!0,isSigner:!1},{name:"vaultTokenOut",isMut:!0,isSigner:!1},{name:"admin",isMut:!0,isSigner:!0},{name:"mintTokenIn",isMut:!1,isSigner:!1},{name:"mintTokenOut",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"rateTokenIn",type:"u64"},{name:"rateTokenOut",type:"u64"}]},{name:"updateRegistry",accounts:[{name:"registry",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!0}],args:[{name:"rateTokenIn",type:"u64"},{name:"rateTokenOut",type:"u64"}]},{name:"swap",accounts:[{name:"registry",isMut:!1,isSigner:!1},{name:"swapper",isMut:!1,isSigner:!0},{name:"vaultTokenIn",isMut:!0,isSigner:!1},{name:"vaultTokenOut",isMut:!0,isSigner:!1},{name:"buyerTokenInAccount",isMut:!0,isSigner:!1},{name:"buyerTokenOutAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amountRequested",type:"u64"}]},{name:"collectProceeds",accounts:[{name:"registry",isMut:!1,isSigner:!1},{name:"admin",isMut:!1,isSigner:!0},{name:"vaultTokenIn",isMut:!0,isSigner:!1},{name:"adminProceedsAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"collectReserve",accounts:[{name:"registry",isMut:!1,isSigner:!1},{name:"vaultTokenOut",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!0},{name:"adminReserveAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"registry",type:{kind:"struct",fields:[{name:"admin",type:"publicKey"},{name:"vaultTokenIn",type:"publicKey"},{name:"vaultTokenOut",type:"publicKey"},{name:"rateTokenIn",type:"u64"},{name:"rateTokenOut",type:"u64"},{name:"mintTokenIn",type:"publicKey"},{name:"mintTokenOut",type:"publicKey"}]}}],errors:[{code:6e3,name:"InsufficientUserFunds",msg:"Insufficient user funds"},{code:6001,name:"InsufficientVaultFunds",msg:"Insufficient vault funds"},{code:6002,name:"InvalidCalculation",msg:"Invalid calculation"}]},ne=n(77),ie=Object(i.createContext)({}),re=function(e){var t=e.children,n=Object(x.d)().connection,r=Object(x.c)(),a=Object(i.useMemo)((function(){return function(e,t){var n=new Q.a(e,t||new Z,{});return n.sendAndConfirm=function(){var n=Object(Y.a)(_.a.mark((function n(i,r,a){var c,o,s,l;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===r&&(r=[]),i.feePayer=null===t||void 0===t?void 0:t.publicKey,n.next=4,e.getRecentBlockhash();case 4:return i.recentBlockhash=n.sent.blockhash,n.next=7,null===t||void 0===t?void 0:t.signTransaction(i);case 7:return r.filter((function(e){return void 0!==e})).forEach((function(e){i.partialSign(e)})),c=i.serialize(),n.next=11,e.sendRawTransaction(c);case 11:o=n.sent,s=0;case 13:if(!(s<30)){n.next=24;break}return n.next=16,e.getSignatureStatus(o);case 16:if("confirmed"!==(null===(l=n.sent.value)||void 0===l?void 0:l.confirmationStatus)){n.next=19;break}return n.abrupt("break",24);case 19:return n.next=21,R(1e3);case 21:s++,n.next=13;break;case 24:return n.abrupt("return",o);case 25:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}(),n}(n,r)}),[n,r]),c=Object(i.useMemo)((function(){return{draffleClient:new Q.c(ee,ne.d,a)}}),[a]).draffleClient,o=Object(i.useMemo)((function(){return{dispenserClient:new Q.c(te,ne.a,a)}}),[a]).dispenserClient;return Object(D.jsx)(ie.Provider,{value:{draffleClient:c,dispenserClient:o},children:t})},ae=function(){var e=Object(i.useContext)(ie);if(void 0===e)throw new Error("useProgramApis must be used within a ProgramApisProvider");return e},ce=n(163),oe=n(179),se=n(140),le=new Map([["DGhDH4oofbrkbHakhfBasxTBoKzPRQGv1veiCiSSV1TA",{name:"Ghost Kid Lesgooo",overviewImageUri:"https://img-cdn.magiceden.dev/rs:fill:400:400:0:0/plain/https://arweave.net/RU6NsAm18yH-Qtx1KHOswq-NiR-xSI48t5GjaaT3Y98?ext=png"}],["DSFVtfeyBsYf3YwrMEGmL4ch8gtxRjorS8YFYMJb3D4Xs",{name:"GhostKid beep boop testing completeo",overviewImageUri:"https://img-cdn.magiceden.dev/rs:fill:400:400:0:0/plain/https://arweave.net/4dhJNE6wWr0ZYOfz434fk9DAapOADlNAn2Ftxr058aU?ext=png"}]]),ue=new Map([["DGhDH4oofbrkbHakhfBasxTBoKzPRQGv1veiCiSSV1TA",{name:"Ghost Kid Lesgooo",overviewImageUri:"https://img-cdn.magiceden.dev/rs:fill:400:400:0:0/plain/https://arweave.net/RU6NsAm18yH-Qtx1KHOswq-NiR-xSI48t5GjaaT3Y98?ext=png"}],["DSFVtfeyBsYf3YwrMEGmL4ch8gtxRjorS8YFYMJb3D4Xs",{name:"GhostKid beep boop testing completeo",overviewImageUri:"https://img-cdn.magiceden.dev/rs:fill:400:400:0:0/plain/https://arweave.net/4dhJNE6wWr0ZYOfz434fk9DAapOADlNAn2Ftxr058aU?ext=png"}]]),de=se.b?le:ue,pe=function(){var e=Object(Y.a)(_.a.mark((function e(t,n,i,r,a){var c,o,s,l,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.c)(t.publicKey,i,r);case 2:if(c=e.sent,o=new Map,a){e.next=18;break}return e.prev=5,e.next=8,r.getAccountInfo(t.account.entrants);case 8:if(s=e.sent){e.next=11;break}throw new Error("Cannot find entrants account info");case 11:a=Object(ce.a)(i,s.data),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.log("Raffle ".concat(t.publicKey," entrants account is closed")),a={max:0,total:0,entrants:[]};case 18:return o=Object(ce.e)(a),e.next=21,Object(ce.b)(t.publicKey,i,t.account.totalPrizes);case 21:return l=e.sent,u=new Date(1e3*t.account.endTimestamp.toNumber()),e.abrupt("return",{publicKey:t.publicKey,metadata:n,endTimestamp:u,entrantsCap:a.max,entrants:o,entrantsRaw:a.entrants,totalTickets:a.total,entrantsAccountAddress:t.account.entrants,randomness:t.account.randomness,prizes:l,proceeds:{address:c.address,ticketPrice:t.account.ticketPrice,mint:c.mintInfo},isEnded:u<new Date});case 24:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n,i,r,a){return e.apply(this,arguments)}}(),me=Object(i.createContext)({}),fe=function(e){var t=e.children,n=void 0===t?null:t,r=Object(x.d)().connection,a=ae().draffleClient,c=Object(i.useState)(!0),o=Object(f.a)(c,2),s=o[0],l=o[1],u=Object(i.useState)(new Map),d=Object(f.a)(u,2),p=d[0],m=d[1],j=Object(i.useCallback)(Object(Y.a)(_.a.mark((function e(){var t,n,i,c,o,s=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],l(!0),e.prev=2,e.next=5,Object(ce.d)(a);case 5:return n=e.sent,i=n.raffleDataRawProgramAccounts,c=n.entrantsDataProgramAccounts,i=i.filter((function(e){var n=e.publicKey;return t||de.has(n.toBase58())})),e.next=11,Promise.all(i.map(function(){var e=Object(Y.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe(t,de.get(t.publicKey.toString())||{name:"Unnamed Raffle",alternatePurchaseMints:[]},a,r,null===(n=c.find((function(e){return e.publicKey.equals(t.account.entrants)})))||void 0===n?void 0:n.account));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:o=e.sent.reduce((function(e,t){return e.set(t.publicKey.toString(),t),e}),new Map),m(o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:l(!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),[r,a]),b=Object(i.useCallback)(function(){var e=Object(Y.a)(_.a.mark((function e(t){var n,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.has(t.toString())&&de.has(t)){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,a.account.raffle.fetch(new J.PublicKey(t));case 5:return n=e.sent,e.next=8,pe({publicKey:new J.PublicKey(t),account:n},de.get(t),a,r);case 8:i=e.sent,c=p.get(t.toString()),o=i,JSON.stringify(c)!==JSON.stringify(o)&&m((function(e){var n=Object(oe.cloneDeep)(e);return n=n.set(t,i)})),l(!1);case 11:case"end":return e.stop()}var c,o}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,a,p,m]);return Object(i.useEffect)((function(){j()}),[j]),Object(D.jsx)(me.Provider,{value:{raffles:p,fetchAllRaffles:j,updateRaffleById:b,fetching:s},children:n})},je=function(){var e=Object(i.useContext)(me);if(void 0===e)throw new Error("useRafflesStore must be used within an RafflesStoreProvider");return e},be=Object(A.a)((function(e){return{background:{width:"100vw",height:"100vh",backgroundImage:"url(https://cdn.discordapp.com/attachments/966870333174988850/980997883912400896/background.png)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",position:"fixed"},content:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"}}})),he=function(e){var t=e.children,n=be();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:n.background}),Object(D.jsx)("div",{className:n.content,children:t})]})},xe=n(712),ge=n(739),Oe=Object(A.a)((function(e){return{root:function(e){return{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:e.device===M.Phone?"20px":"50px"}}}})),ve=function(e){var t=e.children,n=G().device,i=Oe({device:n});return Object(D.jsx)(xe.a,{style:{width:"90%",padding:"0 10px",display:" flex",alignItems:"center"},children:Object(D.jsx)(ge.a,{className:i.root,children:t})})},ye=n(721),we=n(409),ke=n.n(we),Se=n(722),Ne=n(723),Ce=Object(A.a)((function(e){return{root:function(e){return{width:"100%",height:e.device===M.Phone?"50px":"90px"}},drawerHeader:function(){return{width:"100%",height:"50px",display:"flex",justifyContent:"space-between",padding:e.spacing(0,1)}},appBar:function(e){return{height:e.device===M.Phone?"50px":"90px",display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundImage:"url(https://cdn.discordapp.com/attachments/966870333174988850/980997883912400896/background.png)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",alignItems:"center",boxShadow:"0 0 10px 0 #000",zIndex:99}},navContainer:{display:"flex",alignItems:"center",marginRight:"30px"},homeButton:function(){return{marginLeft:"30px",color:e.palette.primary.dark,"&:hover":{backgroundColor:"transparent"}}},navButtons:{marginLeft:"30px",color:e.palette.primary.main,"&:hover":{textShadow:"0px 0px 5px #9b51ff",backgroundColor:"transparent"}},homeButtonIcon:{height:"60px",color:e.palette.primary.main},walletButtonContainer:{marginLeft:"20px"},currentLocation:{color:"black"}}})),Ie=n(743),Te=n(720),Pe=n(126),ze=n(48),Me=Object(A.a)((function(e){return{walletConnectButton:{width:"100%",backgroundColor:"#9b51ff",borderColor:e.palette.common.white,boxShadow:"0 0 5px 2px #9b51ff, inset 0 0 10px 0px #9b51ff",color:e.palette.common.white,"&:hover":{backgroundColor:Object(ze.a)(e.palette.primary.main,.2),borderColor:e.palette.common.white}},walletDisconnectButton:{width:"100%",backgroundColor:"9b51ff",borderColor:e.palette.common.white,boxShadow:"0 0 5px 2px ".concat(e.palette.secondary.main,", inset 0 0 10px 0px ").concat(e.palette.secondary.main),color:e.palette.common.white,"&:hover":{backgroundColor:Object(ze.a)(e.palette.secondary.main,.2),borderColor:e.palette.common.white}}}})),Re=function(){var e=Me(),t=Object(x.e)().connected;return Object(D.jsx)(Pe.b,{variant:"outlined",color:"secondary",className:t?e.walletDisconnectButton:e.walletConnectButton})},Ae=Object(A.a)((function(e){return{root:{width:"100%"},paper:{backgroundColor:"rgba(57,9,74,1)"},drawerHeader:{marginLeft:"10px",height:"50px",display:"flex",justifyContent:"flex-end",alignItems:"center",padding:e.spacing(0,1)},drawerContent:{width:"100vw",marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},walletButtonContainer:{width:"76%",maxWidth:"245px",display:"flex",justifyContent:"center"},navButtonsContainer:{width:"100%",marginTop:"30px",display:"flex",flexDirection:"column",justifyContent:"center"}}})),Be=n(713),De=Object(A.a)((function(e){return{navButtons:function(t){return{fontSize:"16px",color:t.isCurrent?Object(ze.b)(e.palette.secondary.main,.1):e.palette.primary.main,"&:hover":{textShadow:"0px 0px 5px #9b51ff",backgroundColor:"transparent"}}}}})),Ee=function(e){var t=e.label,n=e.target,i=e.onClick,r=e.size,a=e.isCurrent,c=void 0!==a&&a,o=e.className,s=Object(O.a)(e,["label","target","onClick","size","isCurrent","className"]),l=De({isCurrent:c}),d=Object(u.f)().push;return Object(D.jsx)(Be.a,Object(g.a)(Object(g.a)({onClick:function(e){d(n),i&&i(e)},variant:"text",disableRipple:!0,size:r,className:"".concat(l.navButtons," ").concat(o)},s),{},{children:t}))},Ke=n(129),Le=function(e){return e&&Ke.a.includes(e.toBase58())},Fe=function(e){var t=e.wallet,n=e.isOpen,i=e.setIsOpen,r=e.navLinksList,a=Ae(),c=Object(u.g)().pathname;return Object(D.jsxs)(Ie.a,{anchor:"left",className:a.root,classes:{paper:a.paper},open:n,onClose:function(){return i(!1)},onOpen:function(){return i(!0)},children:[Object(D.jsx)("div",{className:a.drawerHeader,children:Object(D.jsx)(S.a,{size:"medium",onClick:function(){return i(!1)},children:Object(D.jsx)(Te.a,{})})}),Object(D.jsxs)("div",{className:a.drawerContent,children:[Object(D.jsx)("div",{className:a.walletButtonContainer,children:Object(D.jsx)(Re,{})}),Object(D.jsx)("div",{className:a.navButtonsContainer,children:r.filter((function(e){var n=e.admin;return!n||n&&Le(t)})).map((function(e){return Object(D.jsx)(Ee,{label:e.label,target:e.target,onClick:function(){return i(!1)},isCurrent:e.target===c})}))})]})]})},Ue=[{label:"Home",target:p.HOME},{label:"Explore",target:p.RAFFLES},{label:"Admin Panel",target:p.ADMIN.HOME,admin:!0}],Ge=function(e){var t=e.onBackNavigation,n=G().device,r=Ce({device:n}),a=Object(x.e)(),c=(a.connected,a.publicKey),o=Object(u.f)(),s=o.push,l=o.location,d=Object(i.useState)(!1),m=Object(f.a)(d,2),j=m[0],b=m[1];return Object(D.jsxs)("div",{className:r.root,children:[Object(D.jsx)("div",{style:{width:"100%",height:n===M.Phone?"50px":"90px",background:"linear-gradient(0deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2))",backdropFilter:"blur(3px)",zIndex:98}}),Object(D.jsx)(ye.a,{className:r.appBar,elevation:0,children:n===M.Phone?Object(D.jsxs)("div",{className:r.drawerHeader,children:[t?Object(D.jsx)(S.a,{size:"medium",onClick:function(){return t()},children:Object(D.jsx)(Se.a,{})}):Object(D.jsx)(S.a,{size:"medium",onClick:function(){return s(p.HOME)},children:Object(D.jsx)(Ne.a,{})}),Object(D.jsx)(S.a,{size:"medium",onClick:function(){return b(!0)},children:Object(D.jsx)(ke.a,{})}),Object(D.jsx)(Fe,{wallet:c,isOpen:j,setIsOpen:b,navLinksList:Ue})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{children:Object(D.jsx)(S.a,{onClick:function(){return s(p.HOME)},className:r.homeButton,children:Object(D.jsx)("img",{src:"/logo.png",alt:"Site banner",className:r.homeButtonIcon})})}),Object(D.jsxs)("div",{className:r.navContainer,children:[Ue.filter((function(e){var t=e.admin;return!t||t&&Le(c)})).map((function(e){var t=e.label,n=e.target;return Object(D.jsx)(Ee,{label:t,target:n,isCurrent:l.pathname===n,style:{marginRight:"20px"}},n)})),Object(D.jsx)("div",{className:r.walletButtonContainer,children:Object(D.jsx)(Re,{})})]})]})})]})},We=function(e){var t=e.children,n=e.onBackNavigation;return Object(D.jsxs)(he,{children:[Object(D.jsx)(Ge,{onBackNavigation:n}),Object(D.jsx)(ve,{children:t})]})},He=n(740),Ve=n(293),_e=n(62),Ye=Object(A.a)((function(e){return{filterBar:function(e){return{width:"100%",display:"flex",flexDirection:e.device===M.Phone?"column":"row",alignItems:"center",marginBottom:"30px",justifyContent:"space-between"}},leftSection:{width:"25%"},middleSection:{width:"50%",display:"flex",justifyContent:"center"},rightSection:{width:"25%",display:"flex",justifyContent:"flex-end"},leftPhoneSection:{width:"100%",display:"flex",justifyContent:"center"},rightPhoneSection:{width:"100%",display:"flex",justifyContent:"center"},ownRafflesSwitchContainer:{display:"flex",justifyContent:"center",width:200,height:30,border:"2px solid white",borderRadius:"2px",boxShadow:"0 0 5px 0 #e86bff"},showEndedRaffles:{display:"flex",alignItems:"center"},showEndedRafflesCheckbox:{color:e.palette.primary.main,"&.Mui-checked":{color:e.palette.primary.main},"&:hover":{backgroundColor:"transparent"}},hideEndedText:{color:"white",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"}}}})),Je=function(e){var t=e.hideEndedRaffles,n=e.setHideEndedRaffles,i=e.setShowOwnRafflesOnly,r=G().device,a=Ye({device:r}),c=Object(_e.a)(),o=Object(x.e)().connected,s=[{label:"ALL",value:!1},{label:"MINE",value:!0}],l=function(e){i(e)};return r===M.Phone?Object(D.jsxs)("div",{className:a.filterBar,children:[Object(D.jsx)("div",{className:a.leftPhoneSection,children:o&&Object(D.jsx)("div",{className:a.ownRafflesSwitchContainer,children:Object(D.jsx)(Ve.a,{onChange:l,options:s,optionBorderRadius:0,wrapperBorderRadius:0,fontSize:12,initialSelectedIndex:0,selectionIndicatorMargin:0,selectedBackgroundColor:c.palette.primary.main,backgroundColor:"transparent",fontColor:"white"})})}),Object(D.jsx)("div",{className:a.rightPhoneSection,children:Object(D.jsxs)("div",{className:a.showEndedRaffles,children:[Object(D.jsx)(He.a,{className:a.showEndedRafflesCheckbox,value:t,checked:t,onClick:function(){return n((function(e){return!e}))}}),Object(D.jsx)(Be.a,{variant:"text",disableRipple:!0,className:a.hideEndedText,onClick:function(){return n((function(e){return!e}))},children:"Hide ended raffles"})]})})]}):Object(D.jsxs)("div",{className:a.filterBar,children:[Object(D.jsx)("div",{className:a.leftSection}),Object(D.jsx)("div",{className:a.middleSection,children:o&&Object(D.jsx)("div",{className:a.ownRafflesSwitchContainer,children:Object(D.jsx)(Ve.a,{onChange:l,options:s,optionBorderRadius:0,wrapperBorderRadius:0,fontSize:12,initialSelectedIndex:0,selectionIndicatorMargin:0,selectedBackgroundColor:c.palette.primary.main,backgroundColor:"transparent",fontColor:"white"})})}),Object(D.jsx)("div",{className:a.rightSection,children:Object(D.jsxs)("div",{className:a.showEndedRaffles,children:[Object(D.jsx)(He.a,{className:a.showEndedRafflesCheckbox,value:t,checked:t,onClick:function(){return n((function(e){return!e}))}}),Object(D.jsx)(Be.a,{variant:"text",disableRipple:!0,className:a.hideEndedText,onClick:function(){return n((function(e){return!e}))},children:"Hide ended raffles"})]})})]})},Qe=function(){var e=G().device,t=H({device:e}),n=Object(x.e)().publicKey,r=je(),a=r.raffles,c=r.fetchAllRaffles,o=r.fetching,s=Object(i.useState)(!1),l=Object(f.a)(s,2),u=l[0],d=l[1],p=Object(i.useState)(!1),g=Object(f.a)(p,2),O=g[0],v=g[1];Object(i.useEffect)(c,[c]);var y=Object(i.useMemo)((function(){return{own:function(e){return e.entrants.has((null===n||void 0===n?void 0:n.toString())||"")},ongoing:function(e){return new Date<e.endTimestamp}}}),[n]),w=Object(i.useMemo)((function(){var e=Object(m.a)(a.values()).sort((function(e,t){return t.endTimestamp.getTime()-e.endTimestamp.getTime()}));return u&&(e=e.filter(y.own)),O&&(e=e.filter(y.ongoing)),e}),[a,y,u,O]);return 0===a.size&&o?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"h1",className:t.titleBar,children:"Explore Raffles"}),Object(D.jsx)("div",{className:t.mainContent,children:Object(D.jsx)(h.a,{color:"secondary"})})]}):0===a.size?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"h1",className:t.titleBar,children:"Explore Raffles"}),Object(D.jsx)(j.a,{variant:"h4",className:t.mainContent,children:"Raffles will be coming soon!"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"h1",className:t.titleBar,children:"Explore Raffles"}),Object(D.jsx)(Je,{hideEndedRaffles:O,setHideEndedRaffles:v,setShowOwnRafflesOnly:d}),w.length>0?Object(D.jsx)(b.a,{container:!0,justifyContent:"center",direction:"row",className:t.rafflesGrid,children:w.filter((function(e){return e.prizes.length>0})).map((function(e){return Object(D.jsx)(W,{className:t.raffleCardContainer,raffle:e},e.publicKey.toString())}))}):Object(D.jsx)(j.a,{variant:"h4",className:t.mainContent,children:"No Raffles to display."})]})},qe=function(){return Object(D.jsx)(We,{children:Object(D.jsx)(Qe,{})})},Xe=n(110),Ze=n(727),$e=n(728),et=function(){var e=Object(Y.a)(_.a.mark((function e(t,n,i,r){var a,c,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i>=n.prizes.length)){e.next=2;break}throw Error("Prize index does not match prize list (".concat(n.prizes.length,")"));case 2:return a=n.prizes[i],e.next=5,P.Token.getAssociatedTokenAddress(P.ASSOCIATED_TOKEN_PROGRAM_ID,P.TOKEN_PROGRAM_ID,a.mint.publicKey,t.provider.wallet.publicKey);case 5:return c=e.sent,e.next=8,t.provider.connection.getAccountInfo(c);case 8:return null===e.sent&&(o=[Object(K.a)(a.mint.publicKey,c,t.provider.wallet.publicKey)]),e.next=12,t.rpc.claimPrize(i,r,{accounts:{raffle:n.publicKey,entrants:n.entrantsAccountAddress,prize:a.address,winnerTokenAccount:c,tokenProgram:P.TOKEN_PROGRAM_ID},instructions:o});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),tt=n(410),nt=n(289),it=Object(A.a)((function(e){return{label:{textAlign:"left"},value:{display:"flex",flexDirection:"row",alignItems:"center",verticalAlign:"center"},actionSection:{padding:"5px 5px",minHeight:"180px",width:"100%",backgroundColor:Object(ze.a)(e.palette.common.white,.15),borderRadius:"4px",boxShadow:"0 2px 4px 0 #000",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},mainButton:{width:"100%",height:"100%",backgroundColor:e.palette.primary.main,borderColor:e.palette.primary.main,color:e.palette.common.white,"&:hover":{backgroundColor:Object(ze.b)(e.palette.primary.main,.2),borderColor:Object(ze.b)(e.palette.primary.main,.2)},"&:disabled":{backgroundColor:"#393939",borderColor:"#393939",color:"#898989"}}}})),rt=Object(A.a)((function(e){return{textHighlight:{marginBottom:"10px"},scrollLink:{textTransform:"none",marginRight:"-5px",color:e.palette.primary.main,"&:hover":{textShadow:"0px 0px 5px #e86bff",backgroundColor:"transparent",textDecoration:"none"}},scrollIcon:{transform:"rotate(90deg)",fontSize:"50px",opacity:"0.6",marginTop:"20px",marginBottom:"60px"},connectToBuyButton:{marginTop:"20px",width:"80%",height:"40px"}}})),at=function(){var e,t=Date.now()+5e3,n={startVelocity:30,spread:360,ticks:60,zIndex:0};function i(e,t){return Math.random()*(t-e)+e}return e=setInterval((function(){var r=t-Date.now();if(r<=0)return clearInterval(e);var a=r/5e3*50;Object(nt.a)(Object.assign({},n,{particleCount:a,origin:{x:i(.1,.3),y:Math.random()-.2}})),Object(nt.a)(Object.assign({},n,{particleCount:a,origin:{x:i(.7,.9),y:Math.random()-.2}}))}),250)},ct=function(e){var t=e.raffle,n=e.userPubkey,r=e.entrant,a=e.entrantWinningTickets,c=e.scrollRef,o=Object(g.a)(Object(g.a)({},it()),rt()),s=Object(i.useMemo)((function(){return 0===t.prizes.length}),[t]),l=Object(i.useMemo)((function(){return!!t.randomness}),[t]),u=Object(i.useMemo)((function(){return!!n}),[n]),d=Object(i.useMemo)((function(){return((null===r||void 0===r?void 0:r.tickets.length)||0)>0}),[r]);return Object(i.useEffect)((function(){if(0!==a.length){var e=at();return function(){return clearInterval(e)}}}),[a.length]),s?Object(D.jsx)(D.Fragment,{children:"No prizes to reveal!"}):l?u?d?0===a.length?Object(D.jsxs)("div",{children:[Object(D.jsx)(j.a,{variant:"h3",className:o.textHighlight,children:"Oh no! No prize."}),Object(D.jsx)(j.a,{variant:"body1",children:"Better luck next time!"})]}):Object(D.jsxs)("div",{children:[Object(D.jsx)(j.a,{variant:"h3",className:o.textHighlight,children:"Hurray, you won!"}),Object(D.jsx)("div",{children:Object(D.jsxs)(j.a,{children:[Object(D.jsx)(Be.a,{className:o.scrollLink,variant:"text",onClick:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},children:"Scroll"}),"to see your prize(s)!"]})})]}):Object(D.jsx)(j.a,{variant:"body1",children:"Uh oh! It looks like you did not participate in this raffle!"}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"h3",className:o.textHighlight,children:"Winners have been announced."}),Object(D.jsx)(j.a,{variant:"body1",children:"Connect your wallet to check if you have won any prizes!"}),Object(D.jsx)(Pe.b,{className:"".concat(o.mainButton," ").concat(o.connectToBuyButton),children:"Connect to reveal"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"body1",className:o.textHighlight,children:"Winners will be announced soon."}),Object(D.jsx)(j.a,{variant:"body1",children:"Hang tight!"})]})},ot=n(714),st=n(715),lt=n(716),ut=Object(A.a)((function(e){return{root:function(e){var t=e.device;return{width:"100%",minWidth:t===M.Phone?"256px":"313px",maxWidth:(M.Phone,"380px"),display:"flex",flexDirection:"column",fontSize:"30px"}},ticketsSection:{display:"flex",flexDirection:"row"},totalTickets:{width:"58%"},ticketPrice:{width:"42%"},myTickets:{width:"55%"},showMyTickets:{width:"45%",display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"baseline",paddingBottom:"5px"},ticketButton:{fontSize:"14px",color:e.palette.primary.main,textShadow:"0px 0px 5px #e86bff",padding:"0 0","&:hover":{backgroundColor:"transparent"}},separator:{margin:"0 5px"}}})),dt=function(e){var t=e.setOpen,n=e.userTickets,i=Object(O.a)(e,["setOpen","userTickets"]);return Object(D.jsxs)(ot.a,Object(g.a)(Object(g.a)({},i),{},{onClose:function(){return t(!1)},fullWidth:!0,children:[Object(D.jsx)(st.a,{children:"My tickets"}),Object(D.jsx)(lt.a,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(D.jsxs)("div",{children:["#",e+1]},e)}))})]}))},pt=function(e){var t,n=e.userConnected,r=e.raffle,a=e.userTickets,c=G().device,o=Object(g.a)(Object(g.a)({},it()),ut({device:c})),s=Object(i.useState)(!1),l=Object(f.a)(s,2),u=l[0],d=l[1];return Object(D.jsxs)("div",{className:o.root,children:[Object(D.jsxs)("div",{className:o.ticketsSection,children:[Object(D.jsxs)("div",{className:o.totalTickets,children:[Object(D.jsx)(j.a,{variant:"overline",className:o.label,children:"Tickets sold"}),Object(D.jsxs)("div",{className:o.value,children:[Object(D.jsx)(T.a,{start:0,end:r.totalTickets,delay:0,duration:.8,preserveValue:!0,useEasing:!0,children:function(e){var t=e.countUpRef;return Object(D.jsx)(j.a,{variant:"h4",ref:t})}}),Object(D.jsx)(j.a,{variant:"h4",className:o.separator,children:"/"}),Object(D.jsx)(j.a,{variant:"h4",children:"".concat(r.entrantsCap)})]})]}),Object(D.jsxs)("div",{className:o.ticketPrice,children:[Object(D.jsx)(j.a,{variant:"overline",className:o.label,children:"Ticket Price"}),Object(D.jsx)(j.a,{variant:"h4",children:"".concat(Object(K.c)(r.proceeds.ticketPrice,r.proceeds.mint)," ").concat(r.proceeds.mint.symbol)})]})]}),n&&Object(D.jsxs)("div",{className:o.ticketsSection,children:[Object(D.jsxs)("div",{className:o.myTickets,children:[Object(D.jsx)(j.a,{variant:"overline",className:o.label,children:"My tickets"}),Object(D.jsx)("div",{className:o.value,children:Object(D.jsx)(T.a,{start:0,end:null!==(t=null===a||void 0===a?void 0:a.length)&&void 0!==t?t:0,delay:0,duration:.8,preserveValue:!0,useEasing:!0,children:function(e){var t=e.countUpRef;return Object(D.jsx)(j.a,{variant:"h4",ref:t})}})})]}),(null===a||void 0===a?void 0:a.length)&&Object(D.jsxs)("div",{className:o.showMyTickets,children:[Object(D.jsx)(Be.a,{variant:"text",size:"small",disableRipple:!0,onClick:function(){d(!0)},className:o.ticketButton,children:"See my tickets"}),Object(D.jsx)(dt,{userTickets:a,open:u,setOpen:d})]})]})]})},mt=Object(A.a)((function(e){return{root:{height:"100%"},claimButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},claimButtonContentLeft:{width:"20%",display:"flex",justifyContent:"center"},claimButtonContentMiddle:{width:"80%"},claimButtonContentRight:{width:"0%"},claimSpinner:{height:"50px",color:e.palette.secondary.main}}})),ft=function(e){var t=e.prize,n=e.prizeIndex,r=e.ticketIndex,a=e.claimPrize,c=Object(g.a)(Object(g.a)({},it()),mt()),o=Object(i.useState)(new Map),s=Object(f.a)(o,2),l=s[0],u=s[1];return Object(i.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(D.jsx)("div",{className:c.root,children:Object(D.jsx)(Be.a,{variant:"outlined",color:"secondary",onClick:Object(Y.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((function(e){return Object(oe.cloneDeep)(e.set(n,!0))})),e.next=3,a(n,r);case 3:u((function(e){return Object(oe.cloneDeep)(e.set(n,!1))}));case 4:case"end":return e.stop()}}),e)}))),disabled:t.amount.isZero()||!!l.get(n),className:c.mainButton,children:Object(D.jsx)("div",{className:c.claimButtonContent,children:l.get(n)?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:c.claimButtonContentLeft,children:Object(D.jsx)(h.a,{size:20,className:c.claimSpinner})}),Object(D.jsx)("div",{className:c.claimButtonContentMiddle,children:"Processing..."}),Object(D.jsx)("div",{className:c.claimButtonContentRight})]}):Object(D.jsx)(D.Fragment,{children:"Claim"})})})})},jt=function(e){var t=e.endRange,n=e.drawLength,r=void 0===n?50:n,a=e.spinIntervalMs,c=void 0===a?100:a,o=e.redrawIntervalMs,s=void 0===o?5e3:o,l=Object(i.useState)(0),u=Object(f.a)(l,2),d=u[0],p=u[1],m=Object(i.useState)([]),j=Object(f.a)(m,2),b=j[0],h=j[1];if(Object(i.useEffect)((function(){var e=setInterval((function(){return h(Array.from({length:r},(function(){return Math.round(Math.random()*t)})))}),s);return function(){return clearInterval(e)}}),[t,s,r,h]),Object(i.useEffect)((function(){var e=setInterval((function(){return p((function(e){return++e%r}))}),c);return function(){return clearInterval(e)}}),[r,c,p]),0!==t)return b[d]},bt=Object(A.a)((function(e){return{root:function(e){var t=e.device;return{height:t===M.Phone?"25vw":"300px",width:t===M.Phone?"100%":"200px",position:"relative",cursor:"pointer","&:hover":{boxShadow:"0 3px 10px 0 #111",transform:"scale3d(1.02, 1.02, 1)"},"&:active":{transform:"scale3d(1, 1, 1)"},display:"flex",flexDirection:t===M.Phone?"row":"column",justifyContent:t===M.Phone?"flex-start":"center"}},media:function(e){var t=e.device;return Object(g.a)({},t===M.Phone?{width:"25vw",height:"25vw"}:{height:"200px"})},prizeInfo:function(e){var t=e.device;return{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:t===M.Phone?"baseline":"center",fontSize:(M.Phone,"15px"),padding:t===M.Phone?" 8px":"8px"}},prizeInfoInner:{},prizeNameRow:function(t){var n=t.device;return{display:"flex",flexDirection:"row",color:e.palette.primary.main,fontWeight:"bold",textTransform:"uppercase",alignItems:"center",justifyContent:n===M.Phone?"left":"center",textAlign:n===M.Phone?"left":"center"}},prizeName:{color:e.palette.primary.main,marginLeft:"5px"},winnerSection:{width:"100%",marginTop:"10px",display:"flex",flexDirection:"row"},winnerRow:{display:"flex",flexDirection:"row"},winnertTicket:{marginLeft:"10px"},winnerPubkey:{color:e.palette.secondary.main,marginLeft:"10px"},cardBadge:function(t){var n=t.device;return Object(g.a)(Object(g.a)({fontSize:"12px",fontWeight:"bold",width:"70px",textAlign:"center",padding:"2px",position:"absolute"},n===M.Phone?{top:"3px",left:"3px"}:{top:"5px",right:"5px"}),{},{color:"white",backgroundColor:e.palette.primary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"})}}})),ht=function(e){var t=e.message,n=e.maxCharLength,i=e.addTooltip,r=void 0!==i&&i;return t.length<=n?Object(D.jsx)(D.Fragment,{children:t}):r?Object(D.jsx)(k.a,{title:t,placement:"top",children:Object(D.jsxs)(D.Fragment,{children:[t.slice(0,n-4)," ..."]})}):Object(D.jsxs)(D.Fragment,{children:[t.slice(0,n-4)," ..."]})},xt=n(674),gt=n(671),Ot=n(420),vt=Object(A.a)((function(e){return{modal:function(e){e.device;return{display:"flex",alignItems:"center",justifyContent:"space-around",width:"100%"}},content:function(t){t.device;return{outline:"none",width:"50%",minWidth:"250px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,2,3)}},header:{width:"100%",display:"flex",justifyContent:"flex-end"},body:function(e){var t=e.device;return{width:"100%",display:"flex",flexDirection:t===M.Phone?"column":"row",marginTop:t===M.Phone?"5px":"0"}},contentLeft:function(e){return{width:e.device===M.Phone?"100%":"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},media:{width:"90%"},contentRight:function(t){var n=t.device;return{width:n===M.Phone?"100%":"50%",height:"100%",display:"flex",flexDirection:"column",alignItems:n===M.Phone?"center":"baseline",textAlign:n===M.Phone?"center":"left",justifyContent:"space-evenly",padding:n===M.Phone?e.spacing(1):e.spacing(0,3,3,3)}},ticketButton:{marginTop:"10px",fontSize:"14px",color:e.palette.secondary.main,textShadow:"0px 0px 5px #e86bff",padding:"0 0","&:hover":{backgroundColor:"transparent"}}}})),yt=n(726),wt=function(e){var t=e.height;return Object(D.jsx)("div",{style:{height:t,width:"100%"}})},kt=function(e){var t=e.isOpen,n=e.setIsOpen,i=e.prize,r=e.prizeRank,a=G().device,c=vt({device:a}),o=i.meta.imageUri;return Object(D.jsx)(xt.a,{open:t,onClose:function(){n(!1)},className:c.modal,BackdropComponent:gt.a,BackdropProps:{timeout:500},children:Object(D.jsx)(Ot.a,{in:t,children:Object(D.jsxs)("div",{className:c.content,children:[Object(D.jsx)("div",{className:c.header,children:Object(D.jsx)(S.a,{size:"small",onClick:function(){return n(!1)},children:Object(D.jsx)(Te.a,{})})}),Object(D.jsxs)("div",{className:c.body,children:[Object(D.jsx)("div",{className:c.contentLeft,children:Object(D.jsx)("img",{src:o,className:c.media,alt:i.mint.name})}),Object(D.jsxs)("div",{className:c.contentRight,children:[Object(D.jsxs)("div",{children:[Object(D.jsx)(j.a,{variant:"overline",children:"Codename"}),Object(D.jsx)(j.a,{variant:"body1",children:i.mint.name})]}),Object(D.jsx)(wt,{height:a===M.Phone?"5px":"10px"}),void 0!==r&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{children:[Object(D.jsx)(j.a,{variant:"overline",children:"Prize rank"}),Object(D.jsx)(j.a,{variant:"body1",children:r+1})]}),Object(D.jsx)(wt,{height:a===M.Phone?"5px":"10px"})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)(j.a,{variant:"overline",children:"Mint address"}),Object(D.jsx)(j.a,{variant:"body1",children:z(i.mint.publicKey)})]}),Object(D.jsx)(wt,{height:a===M.Phone?"5px":"10px"}),Object(D.jsxs)(Be.a,{variant:"text",size:"small",disableRipple:!0,onClick:function(){var e=window.open("https://solscan.io/token/".concat(i.mint.publicKey.toString()),"_blank");null===e||void 0===e||e.focus()},className:c.ticketButton,children:["See on Solscan"," ",Object(D.jsx)(yt.a,{style:{height:"17px",marginLeft:"5px"}})]})]})]})]})})})},St=function(e){var t=e.endRange,n=jt({endRange:t});return Object(D.jsxs)(D.Fragment,{children:["#",String((n||0)+1).padStart(4,"0")]})},Nt=function(e){var t=e.prize,n=e.raffle,r=e.index,a=e.badgeText,c=e.winner,o=e.className,s=Object(O.a)(e,["prize","raffle","index","badgeText","winner","className"]),l=G().device,u=Object(g.a)(Object(g.a)({},it()),bt({device:l})),d=Object(i.useState)(!1),p=Object(f.a)(d,2),m=p[0],b=p[1],h=Object(i.useState)(!1),x=Object(f.a)(h,2),k=x[0],S=x[1],C=t.meta.imageUri,I=Object(i.useMemo)((function(){return l===M.Phone?14:18}),[l]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(kt,{isOpen:k,setIsOpen:S,prize:t,prizeRank:r}),Object(D.jsxs)(v.a,Object(g.a)(Object(g.a)({onClick:function(){S(!0)}},s),{},{className:"".concat(u.root," ").concat(o),children:[a&&Object(D.jsx)("div",{className:u.cardBadge,children:a}),!m&&Object(D.jsx)("div",{children:Object(D.jsx)(N.a,{variant:"rect",animation:"wave",classes:{root:u.media}})}),Object(D.jsx)(y.a,{component:"img",className:u.media,src:C,alt:t.mint.name,style:m?{}:{display:"none"},onLoad:function(){return b(!0)}}),Object(D.jsx)(w.a,{className:u.prizeInfo,children:Object(D.jsxs)("div",{className:u.prizeInfoInner,children:[Object(D.jsxs)("div",{className:u.prizeNameRow,children:[Object(D.jsx)(j.a,{variant:"body1",children:void 0!==r&&"#".concat(r+1," ")}),Object(D.jsx)(j.a,{variant:"body1",className:u.prizeName,children:Object(D.jsx)(ht,{message:t.mint.name,maxCharLength:I,addTooltip:!0})})]}),Object(D.jsx)("div",{className:u.winnerSection,children:void 0!==c?Object(D.jsxs)("div",{children:[Object(D.jsx)(j.a,{variant:"body1",children:"Winner: #".concat(String(c+1).padStart(4,"0"))}),Object(D.jsxs)("div",{className:u.winnerRow,children:[Object(D.jsx)(j.a,{variant:"body1",children:"Pubkey: "}),Object(D.jsx)(j.a,{variant:"body1",className:u.winnerPubkey,children:z(n.entrantsRaw[c])})]})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"body1",children:"Drawing..."}),Object(D.jsx)(j.a,{variant:"body1",className:u.winnertTicket,children:Object(D.jsx)(St,{endRange:n.totalTickets})})]})})]})})]}))]})},Ct=Object(A.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},prizesGrid:function(e){return{scrollMargin:"130px",display:"flex",justifyContent:"space-around",flexGrow:"initial",width:"100%",marginTop:e.device===M.Phone?"-20px":"5px"}},prizeItem:function(e){var t=e.device;return{margin:t===M.Phone?"0":"10px",justifyContent:"center",alignItems:"center",marginTop:t===M.Phone?"30px":"0",marginBottom:t===M.Phone?"0":"30px"}},claimButtonContainer:function(e){var t=e.device;return Object(g.a)(Object(g.a)({},t===M.Phone?{height:"25px"}:{}),{},{marginTop:t===M.Phone?"8px":"10px"})}}})),It=function(e){var t=e.raffle,n=e.entrantWinningTickets,r=e.winningTickets,a=e.claimPrize,c=e.scrollRef,o=G().device,s=Object(g.a)(Object(g.a)({},it()),Ct({device:o}));return Object(i.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(D.jsx)("div",{className:s.root,children:Object(D.jsx)(b.a,{ref:c,container:!0,justifyContent:"space-between",direction:o===M.Phone?"column":"row",className:s.prizesGrid,children:t.prizes.map((function(e,i){var c=r[i],o=n.some((function(e){return e.ticketIndex===c}));return Object(D.jsxs)(b.a,{item:!0,className:s.prizeItem,children:[Object(D.jsx)(Nt,Object(g.a)(Object(g.a)({prize:e,raffle:t},e.amount.isZero()?{badgeText:"Claimed"}:{}),{},{index:i,winner:c}),i),o&&Object(D.jsx)("div",{className:s.claimButtonContainer,children:Object(D.jsx)(ft,{claimPrize:a,prize:e,prizeIndex:i,ticketIndex:c})})]},i)}))})})},Tt=Object(A.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},prizesGrid:{display:"flex",flexGrow:"initial",width:"100%"},prizeItem:{margin:"0 5px 30px 5px"},claimButtonContainer:{marginTop:"20px"},claimButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",color:"white"}}})),Pt=function(e){var t=e.raffle,n=e.winningTickets,i=void 0===n?[]:n,r=Object(g.a)(Object(g.a)({},it()),Tt());return 0===t.prizes.length?Object(D.jsx)("div",{className:r.root,children:"No prizes"}):1===t.prizes.length?Object(D.jsx)("div",{className:r.root,children:Object(D.jsx)(b.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:r.prizesGrid,children:Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Nt,{prize:t.prizes[0],raffle:t,winner:i[0],className:r.prizeItem})})})}):2===t.prizes.length?Object(D.jsx)("div",{className:r.root,children:Object(D.jsxs)(b.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:r.prizesGrid,children:[Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Nt,{prize:t.prizes[0],index:0,raffle:t,winner:i[0],className:r.prizeItem})}),Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Nt,{prize:t.prizes[1],index:1,raffle:t,winner:i[1],className:r.prizeItem})})]})}):Object(D.jsx)("div",{className:r.root,children:Object(D.jsxs)(b.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:r.prizesGrid,children:[Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Nt,{prize:t.prizes[0],index:0,raffle:t,winner:i[0],className:r.prizeItem})}),Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Nt,{prize:t.prizes[1],index:1,raffle:t,winner:i[1],className:r.prizeItem})}),Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Nt,{prize:t.prizes[2],index:2,raffle:t,winner:i[2],className:r.prizeItem})})]})})},zt=Object(A.a)((function(e){return{root:{width:"100%",height:"inherit",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},topSection:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},raffleTitle:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center",justifyItems:"space-between"},raffleSubtitle:{color:e.palette.secondary.main,marginLeft:"10px"},leftTitleSection:{paddingLeft:"20px",width:"10%",display:"flex"},middleTitleSection:{width:"90%",display:"flex",justifyContent:"center",textAlign:"center"},rightTitleSection:{width:"10%"},backButton:{color:e.palette.common.black,backgroundColor:Object(ze.a)(e.palette.secondary.main,.8),"&:hover":{boxShadow:"0px 0px 5px ".concat(e.palette.secondary.main,", inset 0px 0px 5px ").concat(e.palette.secondary.main),backgroundColor:Object(ze.a)(e.palette.secondary.main,.8)}},backButtonIcon:{},mainContent:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-end"},prizesSection:{width:"70%",display:"flex",flexDirection:"column",paddingRight:"20px",minHeight:"450px",justifyContent:"center",alignItems:"center"},prizesHeader:{marginBottom:"10px"},seeAllPrizesButton:{marginLeft:"5px",color:e.palette.secondary.main,textTransform:"initial","&:hover":{textShadow:"0px 0px 5px ".concat(e.palette.secondary.main),backgroundColor:"transparent",textDecoration:"none"}},detailsSection:function(e){var t=e.device;return{paddingTop:"20px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",width:"30%",minWidth:t===M.Phone?"256px":"313px",maxWidth:(M.Phone,"380px"),maxHeight:"500px"}},actionSectionContainer:{width:"100%"},totalTickets:{marginRight:"80px"},prizeGallerySection:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},scrollIcon:{color:e.palette.common.white,transform:"rotate(90deg)",fontSize:"50px",opacity:"0.6",marginTop:"20px",marginBottom:"60px"},spacer:{width:"100%",height:"15px"}}})),Mt=function(e){var t=e.raffle,n=e.updateRaffle,r=G().device,a=Object(g.a)(Object(g.a)({},it()),zt({device:r})),c=Object(u.f)().push,o=ae().draffleClient,s=Object(i.useRef)(null),d=Object(i.useMemo)((function(){if(o.provider.wallet.publicKey)return null===t||void 0===t?void 0:t.entrants.get(o.provider.wallet.publicKey.toString())}),[t,o.provider.wallet.publicKey]),f=Object(i.useMemo)((function(){if(!t.randomness||!t.entrants||0===t.entrants.size)return[];var e=t.randomness;return t.prizes.map((function(n,i){return Object(tt.a)(e,i)%t.totalTickets}))}),[t]),b=Object(i.useCallback)(function(){var e=Object(Y.a)(_.a.mark((function e(i,r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et(o,t,i,r);case 3:return e.next=5,Object(Xe.sleep)(500);case 5:n(),l.b.success("Prize claimed, check your wallet!"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.msg?l.b.error("Transaction failed: ".concat(e.t0.msg)):l.b.error("Unexpected error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[o,t,n]),h=Object(i.useMemo)((function(){return d&&f?f.reduce((function(e,t,n){return(null===d||void 0===d?void 0:d.tickets.includes(t))?[].concat(Object(m.a)(e),[{prizeIndex:n,ticketIndex:t}]):e}),[]):[]}),[d,f]);return t?Object(D.jsxs)("div",{className:a.root,children:[r===M.Phone?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(j.a,{variant:"h1",children:["> ".concat(t.metadata.name),Object(D.jsx)("span",{className:a.raffleSubtitle,children:"[ended]"})]}),Object(D.jsx)("div",{className:a.spacer}),Object(D.jsx)(pt,{raffle:t,userConnected:!!o.provider.wallet.publicKey,userTickets:null===d||void 0===d?void 0:d.tickets}),Object(D.jsx)("div",{className:a.spacer}),Object(D.jsx)("div",{className:a.actionSectionContainer,children:Object(D.jsx)("div",{className:a.actionSection,children:Object(D.jsx)(ct,{raffle:t,userPubkey:o.provider.wallet.publicKey,entrant:d,entrantWinningTickets:h,scrollRef:s})})}),Object(D.jsx)("div",{className:a.spacer}),Object(D.jsx)(j.a,{variant:"overline",children:"Results"}),Object(D.jsx)(It,{raffle:t,entrantWinningTickets:h,winningTickets:f,claimPrize:b,scrollRef:s}),Object(D.jsx)("div",{className:a.spacer})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:a.topSection,children:Object(D.jsxs)("div",{className:a.raffleTitle,children:[Object(D.jsx)("div",{className:a.leftTitleSection,children:Object(D.jsx)(S.a,{size:"medium",className:a.backButton,onClick:function(){return c(p.RAFFLES)},children:Object(D.jsx)(Ze.a,{className:a.backButtonIcon})})}),Object(D.jsxs)("div",{className:a.middleTitleSection,children:[Object(D.jsx)(j.a,{variant:"h1",children:"> ".concat(t.metadata.name)}),Object(D.jsx)(k.a,{title:t.endTimestamp.toString(),placement:"bottom",children:Object(D.jsx)(j.a,{variant:"h1",className:a.raffleSubtitle,children:"[ended]"})})]}),Object(D.jsx)("div",{className:a.rightTitleSection})]})}),Object(D.jsxs)("div",{className:a.mainContent,children:[Object(D.jsxs)("div",{className:a.prizesSection,children:[Object(D.jsxs)(j.a,{variant:"overline",children:["Prizes",t.prizes.length>3&&Object(D.jsxs)(D.Fragment,{children:[" -",Object(D.jsxs)(Be.a,{variant:"text",disableRipple:!0,className:a.seeAllPrizesButton,onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},children:["See all ",t.prizes.length]})]})]}),Object(D.jsx)(Pt,{raffle:t,winningTickets:f})]}),Object(D.jsxs)("div",{className:a.detailsSection,children:[Object(D.jsx)(pt,{raffle:t,userConnected:!!o.provider.wallet.publicKey,userTickets:null===d||void 0===d?void 0:d.tickets}),Object(D.jsx)("div",{className:a.actionSectionContainer,children:Object(D.jsx)("div",{className:a.actionSection,children:Object(D.jsx)(ct,{raffle:t,userPubkey:o.provider.wallet.publicKey,entrant:d,entrantWinningTickets:h,scrollRef:s})})})]})]}),Object(D.jsxs)("div",{className:a.prizeGallerySection,children:[Object(D.jsx)($e.a,{className:a.scrollIcon}),Object(D.jsx)(It,{raffle:t,entrantWinningTickets:h,winningTickets:f,claimPrize:b,scrollRef:s})]})]}),Object(D.jsx)("div",{className:a.spacer})]}):null},Rt=function(e){var t=Object(u.f)().push;return Object(D.jsx)(We,{onBackNavigation:function(){return t(p.RAFFLES)},children:Object(D.jsx)(Mt,Object(g.a)({},e))})},At=Object(A.a)((function(e){return{root:function(e){var t=e.device;return{height:t===M.Phone?"25vw":"260px",width:t===M.Phone?"100%":"200px",position:"relative",cursor:"pointer","&:hover":{boxShadow:"0 3px 10px 0 #111",transform:"scale3d(1.02, 1.02, 1)"},"&:active":{transform:"scale3d(1, 1, 1)"},display:"flex",flexDirection:t===M.Phone?"row":"column",justifyContent:t===M.Phone?"flex-start":"center"}},media:function(e){var t=e.device;return Object(g.a)({},t===M.Phone?{width:"25vw",height:"25vw"}:{height:"200px"})},prizeInfo:function(e){var t=e.device;return{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:t===M.Phone?"baseline":"center",fontSize:(M.Phone,"15px"),padding:t===M.Phone?" 8px":"8px"}},prizeNameRow:function(t){var n=t.device;return{width:"100%",display:"flex",flexDirection:"row",color:e.palette.primary.main,fontWeight:"bold",textTransform:"uppercase",alignItems:"center",justifyContent:n===M.Phone?"left":"center",textAlign:n===M.Phone?"left":"center"}},prizeName:{marginLeft:"5px",color:e.palette.primary.main},cardBadge:{fontSize:"12px",fontWeight:"bold",width:"70px",textAlign:"center",padding:"2px",position:"absolute",top:"5px",right:"5px",color:"white",backgroundColor:e.palette.primary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"}}})),Bt=function(e){var t=e.prize,n=e.index,r=e.className,a=Object(O.a)(e,["prize","index","className"]),c=G().device,o=At({device:c}),s=Object(i.useState)(!1),l=Object(f.a)(s,2),u=l[0],d=l[1],p=Object(i.useState)(!1),m=Object(f.a)(p,2),b=m[0],h=m[1],x=t.meta.imageUri,k=Object(i.useMemo)((function(){return c===M.Phone?14:18}),[c]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(kt,{isOpen:b,setIsOpen:h,prize:t,prizeRank:n}),Object(D.jsxs)(v.a,Object(g.a)(Object(g.a)({onClick:function(){h(!0)}},a),{},{className:"".concat(o.root," ").concat(r),children:[!u&&Object(D.jsx)("div",{children:Object(D.jsx)(N.a,{variant:"rect",animation:"wave",classes:{root:o.media}})}),Object(D.jsx)(y.a,{component:"img",classes:{root:o.media},src:x,alt:t.mint.name,style:u?{}:{display:"none"},onLoad:function(){return d(!0)}}),Object(D.jsx)(w.a,{className:o.prizeInfo,children:Object(D.jsxs)("div",{className:o.prizeNameRow,children:[Object(D.jsx)(j.a,{variant:"body1",children:void 0!==n&&"#".concat(n+1," ")}),Object(D.jsx)(j.a,{variant:"body1",className:o.prizeName,children:Object(D.jsx)(ht,{message:t.mint.name,maxCharLength:k,addTooltip:!0})})]})})]}))]})},Dt=Object(A.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},prizesGrid:{display:"flex",flexGrow:"initial",width:"100%"},prizeItem:{margin:"0 5px 30px 5px"},claimButtonContainer:{marginTop:"20px"},claimButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",color:"white"}}})),Et=function(e){var t=e.prizes,n=Object(g.a)(Object(g.a)({},it()),Dt());return 0===t.length?Object(D.jsx)("div",{className:n.root,children:"No prizes"}):1===t.length?Object(D.jsx)("div",{className:n.root,children:Object(D.jsx)(b.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:n.prizesGrid,children:Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Bt,{prize:t[0],className:n.prizeItem})})})}):2===t.length?Object(D.jsx)("div",{className:n.root,children:Object(D.jsxs)(b.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:n.prizesGrid,children:[Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Bt,{prize:t[0],index:0,className:n.prizeItem})}),Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Bt,{prize:t[1],className:n.prizeItem,index:1})})]})}):Object(D.jsx)("div",{className:n.root,children:Object(D.jsxs)(b.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:n.prizesGrid,children:[Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Bt,{prize:t[0],index:0,className:n.prizeItem})}),Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Bt,{prize:t[1],className:n.prizeItem,index:1})}),Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Bt,{prize:t[2],className:n.prizeItem,index:2})})]})})},Kt=n(741),Lt=n(742),Ft=n(718),Ut=n(729),Gt=n(732),Wt=n(79),Ht=function(e,t,n){return e.muln(t).mul(n.dispenserPriceIn).div(n.dispenserPriceOut)},Vt=function(){var e=Object(Y.a)(_.a.mark((function e(t,n,i,r,a,c){var o,s,l,u,d,p;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.Token.getAssociatedTokenAddress(P.ASSOCIATED_TOKEN_PROGRAM_ID,P.TOKEN_PROGRAM_ID,a.mint.publicKey,t.provider.wallet.publicKey);case 2:if(s=e.sent,l=s,u=[],a.mint.publicKey.toBase58()===Wt.c&&(c||u.push(Object(K.a)(new J.PublicKey(Wt.c),s,t.provider.wallet.publicKey)),u.push(J.SystemProgram.transfer({fromPubkey:t.provider.wallet.publicKey,toPubkey:s,lamports:Ht(i.proceeds.ticketPrice,r,a).toNumber()})),u.push(P.Token.createSyncNativeInstruction(P.TOKEN_PROGRAM_ID,s))),a.mint.publicKey.toString()===i.proceeds.mint.publicKey.toString()){e.next=14;break}return d=Ht(i.proceeds.ticketPrice,r,a),console.log("Swapping ".concat(d.toString()," ").concat(a.mint.symbol," for ").concat(i.proceeds.ticketPrice.muln(r).toString()," ").concat(i.proceeds.mint.symbol)),e.next=11,P.Token.getAssociatedTokenAddress(P.ASSOCIATED_TOKEN_PROGRAM_ID,P.TOKEN_PROGRAM_ID,i.proceeds.mint.publicKey,t.provider.wallet.publicKey);case 11:p=e.sent,u.push(n.instruction.swap(i.proceeds.ticketPrice.muln(r),{accounts:{registry:ne.b,swapper:n.provider.wallet.publicKey,vaultTokenIn:Ke.b,vaultTokenOut:Ke.c,buyerTokenInAccount:s,buyerTokenOutAccount:p,tokenProgram:P.TOKEN_PROGRAM_ID}})),l=p;case 14:return u.push(t.instruction.buyTickets(r,{accounts:{raffle:i.publicKey,entrants:i.entrantsAccountAddress,proceeds:i.proceeds.address,buyerTokenAccount:l,buyerTransferAuthority:t.provider.wallet.publicKey,tokenProgram:P.TOKEN_PROGRAM_ID}})),e.abrupt("return",t.provider.sendAndConfirm((o=new J.Transaction).add.apply(o,u)));case 16:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,c){return e.apply(this,arguments)}}(),_t=function(e){var t=e.children,n=Object(O.a)(e,["children"]);return Object(D.jsx)(Be.a,Object(g.a)(Object(g.a)({},n),{},{children:t}))},Yt=Object(A.a)((function(e){return{root:{padding:"15px 20px 15px 20px"},titleSection:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",marginBottom:"15px"},amountLabel:{width:"100%",display:"flex"},ticketAmountSection:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",textAlign:"center",marginBottom:"15px"},ticketAmountSectionLeft:{width:"15%",display:"flex",flexDirection:"row",justifyContent:"flex-start"},ticketAmountSectionMiddle:{width:"65%",display:"flex",flexDirection:"row",justifyContent:"center"},ticketAmountSectionRight:{width:"15%",display:"flex",flexDirection:"row",justifyContent:"flex-end"},changeTicketAmountButton:{color:e.palette.primary.main},ticketAmountTextField:{width:"100%",height:"100%","& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{},"&:hover .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main},"& .MuiOutlinedInput-input":{color:e.palette.common.white,textAlign:"center",fontSize:"15px"},"& .MuiOutlinedInput-adornedStart":{paddingLeft:"8px"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"8px"}},maxButton:{color:e.palette.primary.main,fontSize:"15px",width:"30px",minWidth:"30px",padding:0,"&:hover":{backgroundColor:"transparent"}},priceSection:{width:"100%",height:"80px",display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:"10px"},priceLabel:{margin:"-5px 0 -5px 0",display:"flex",flexDirection:"column",alignItems:"center"},paymentOptionSection:{width:"100%",display:"flex"},basketPrice:{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"baseline"},paymentOptionSelect:{width:"100%",height:"50px",marginTop:"-10px",padding:"0",display:"flex",flexDirection:"row",justifyContent:"flex-start"},paymentOptionSelection:{padding:"0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},paymentOptionMenu:{padding:"0 10px 0 0",margin:"5px 10px 5px 10px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},paymentOptionLogoContainer:{height:"30px",width:"30px",margin:"5px 10px 5px 10px",display:"flex",flexDirection:"row",justifyContent:"center"},paymentOptionLogo:{height:"100%",borderRadius:"50%"},buySection:{width:"100%",display:"flex",flexDirection:"column"},purchaseButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},purchaseButtonContentLeft:{width:"20%",display:"flex",justifyContent:"center"},purchaseButtonContentMiddle:{width:"60%"},purchaseButtonContentRight:{width:"20%"},purchaseSpinner:{height:"50px",color:e.palette.secondary.main},walletBalance:{marginTop:"5px",fontSize:"12px",color:"#777",textAlign:"left"}}})),Jt=1e3,Qt=function(e){return(null!==e&&void 0!==e?e:0)>=5},qt=function(e){var t=e.raffle,n=e.updateRaffle,r=Object(g.a)(Object(g.a)({},it()),Yt()),a=ae(),c=a.draffleClient,o=a.dispenserClient,s=Object(i.useState)(!1),u=Object(f.a)(s,2),d=u[0],p=u[1],b=Object(i.useState)(),x=Object(f.a)(b,2),O=x[0],v=x[1],y=Object(i.useMemo)((function(){return{mint:t.proceeds.mint,dispenserPriceIn:new P.u64(1),dispenserPriceOut:new P.u64(1)}}),[t]),w=Object(i.useState)(y),k=Object(f.a)(w,2),N=k[0],C=k[1],I=Object(i.useState)({mint:t.proceeds.mint.publicKey,amount:void 0}),T=Object(f.a)(I,2),z=T[0],M=T[1],R=Object(i.useState)(1),A=Object(f.a)(R,2),B=A[0],E=A[1],L=Object(i.useState)([]),F=Object(f.a)(L,2),U=F[0],G=F[1],W=Object(i.useMemo)((function(){return(t.metadata.alternatePurchaseMints||[]).reduce((function(e,n){if(!Wt.b.has(n.toString()))return console.log("Mint ".concat(n.toString()," not found in token registry")),e;var i=U.find((function(e){return e.account.mintTokenOut.toString()===t.proceeds.mint.publicKey.toString()&&e.account.mintTokenIn.toString()===n.toString()}));if(!i)return e;var r=Wt.b.get(n.toString());return e.set(n.toString(),{mint:{name:r.name,publicKey:n,logoUrl:r.logoURI,symbol:r.symbol,decimals:r.decimals},dispenserPriceIn:i.account.rateTokenIn,dispenserPriceOut:i.account.rateTokenOut}),e}),new Map([[t.proceeds.mint.publicKey.toString(),{mint:t.proceeds.mint,dispenserPriceIn:new P.u64(1),dispenserPriceOut:new P.u64(1)}]]))}),[t,U]),H=Object(i.useCallback)((function(e){return Ht(t.proceeds.ticketPrice,e,N)}),[t.proceeds.ticketPrice,N]);Object(i.useEffect)((function(){o.account.registry.all().then(G)}),[o,G]),Object(i.useEffect)((function(){var e;if(null===(e=c.provider.wallet)||void 0===e?void 0:e.publicKey){var t,n=function(){var e=Object(Y.a)(_.a.mark((function e(){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.d)(c.provider);case 2:n=e.sent,v(n),Qt(O)&&N.mint.publicKey.toBase58()!==Wt.c&&clearInterval(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n(),t=setInterval((function(){n()}),5e3),function(){return clearInterval(t)}}}),[O,c.provider,c.provider.wallet.publicKey,N.mint.publicKey]),Object(i.useEffect)((function(){if(c.provider.wallet.publicKey){var e=setInterval((function(){t()}),5e3);return t(),function(){return clearInterval(e)}}function t(){return n.apply(this,arguments)}function n(){return(n=Object(Y.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M,e.t1=N.mint.publicKey,e.next=4,Object(K.b)(c.provider,N.mint.publicKey);case 4:e.t2=e.sent,e.t3={mint:e.t1,amount:e.t2},(0,e.t0)(e.t3);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[c.provider,c.provider.wallet,N.mint.publicKey]);var V=Object(i.useMemo)((function(){return Qt(O)}),[O]),Q=Object(i.useMemo)((function(){return N.mint.publicKey.toBase58()===Wt.c?{mint:new J.PublicKey(Wt.c),amount:new P.u64(null!==O&&void 0!==O?O:0)}:z}),[O,z,N.mint.publicKey]),q=Object(i.useMemo)((function(){var e;return(null===(e=Q.amount)||void 0===e?void 0:e.gte(H(B)))&&V}),[Q,V,B,H]),X=Object(i.useMemo)((function(){if(!Q.amount)return new P.u64(0);var e=Q.amount.mul(N.dispenserPriceOut).div(N.dispenserPriceIn).div(t.proceeds.ticketPrice);return N.mint.publicKey.toString()===Q.mint.toString()&&e.ltn(B)&&E(e.toNumber()),e}),[t.proceeds.ticketPrice,B,Q,N]);Object(i.useEffect)((function(){var e=0===B?1:B;Math.min(B,X.toNumber()),E(e)}),[X,B,E]);var Z=Object(i.useMemo)((function(){var e;return(null===(e=Q.amount)||void 0===e?void 0:e.gte(H(B+1)))&&V}),[Q,V,B,H]),$=Object(i.useCallback)(Object(Y.a)(_.a.mark((function e(){var i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),i=void 0!==z.amount,e.next=5,Vt(c,o,t,B,N,i);case 5:return E(1),e.next=8,Object(Xe.sleep)(500);case 8:n(),l.b.success("You bought ".concat(B," ticket(s)")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.msg?l.b.error("Transaction failed: ".concat(e.t0.msg)):l.b.error("Unexpected error");case 15:p(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),[c,o,t,B,N,z,E,n]);return Object(D.jsxs)("div",{className:"".concat(r.actionSection," ").concat(r.root),children:[Object(D.jsx)(j.a,{variant:"h3",className:r.titleSection,children:"Purchase Tickets"}),Object(D.jsx)("div",{className:r.amountLabel,children:Object(D.jsx)(j.a,{variant:"overline",children:"Amount"})}),Object(D.jsxs)("div",{className:r.ticketAmountSection,children:[Object(D.jsx)("div",{className:r.ticketAmountSectionLeft,children:Object(D.jsx)(S.a,{size:"small",onClick:function(){return E((function(e){return Math.max(e-1,1)}))},disabled:B<=1,className:r.changeTicketAmountButton,children:Object(D.jsx)(Ut.a,{style:{fontSize:30}})})}),Object(D.jsx)("div",{className:r.ticketAmountSectionMiddle,children:Object(D.jsx)(Kt.a,{size:"small",variant:"outlined",className:r.ticketAmountTextField,value:B,onChange:function(e){var n=e.target.value;if(""===n||/^[0-9\b]+$/.test(n)){var i=Math.min(Math.min(Number(n),Jt-t.totalTickets),X.toNumber());E(i)}},InputProps:{endAdornment:Object(D.jsx)(_t,{size:"small",variant:"text",disableRipple:!0,className:r.maxButton,onClick:function(){var e=Math.min(Jt-t.totalTickets,X.toNumber());E(e)},children:"MAX"}),startAdornment:Object(D.jsx)(_t,{size:"small",variant:"text",disableRipple:!0,className:r.maxButton,onClick:function(){return E(1)},children:"MIN"})}})}),Object(D.jsx)("div",{className:r.ticketAmountSectionRight,children:Object(D.jsx)(S.a,{size:"small",onClick:function(){return E((function(e){return e+1}))},disabled:t.totalTickets+B>=se.a||!Z||B+1>Jt-t.totalTickets,className:r.changeTicketAmountButton,children:Object(D.jsx)(Gt.a,{style:{fontSize:30}})})})]}),Object(D.jsx)("div",{className:r.priceSection,children:Object(D.jsxs)("div",{className:r.paymentOptionSection,children:[Object(D.jsxs)("div",{className:r.basketPrice,children:[Object(D.jsx)(j.a,{variant:"overline",children:"Total Price"}),Object(D.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:Object(D.jsx)(j.a,{variant:"h4",children:Object(K.c)(H(B),N.mint)})})]}),Object(D.jsxs)("div",{className:r.basketPrice,children:[Object(D.jsx)(j.a,{variant:"overline",children:"Currency"}),1===W.size?Object(D.jsxs)("div",{className:r.paymentOptionSelection,children:[Object(D.jsx)(j.a,{variant:"h4",children:t.proceeds.mint.symbol}),Object(D.jsx)("div",{className:r.paymentOptionLogoContainer,children:Object(D.jsx)("img",{className:r.paymentOptionLogo,src:t.proceeds.mint.logoUrl,alt:"Logo for ".concat(t.proceeds.mint.name)})})]}):Object(D.jsxs)(Lt.a,{variant:"standard",label:"Purchase mint",value:N.mint.publicKey.toString(),onChange:function(e){return C(W.get(e.target.value))},className:r.paymentOptionSelect,MenuProps:{disableScrollLock:!0},renderValue:function(e){var t=W.get(e);return Object(D.jsxs)("div",{className:r.paymentOptionSelection,children:[Object(D.jsx)(j.a,{variant:"h4",children:t.mint.symbol}),Object(D.jsx)("div",{className:r.paymentOptionLogoContainer,children:Object(D.jsx)("img",{className:r.paymentOptionLogo,src:t.mint.logoUrl,alt:"Logo for ".concat(t.mint.name)})})]})},children:[Object(D.jsx)(Ft.a,{value:"",disabled:!0,children:"Select purchase currency"}),Object(m.a)(W.values()).map((function(e){var t=e.mint;return Object(D.jsxs)(Ft.a,{value:t.publicKey.toString(),classes:{root:r.paymentOptionMenu},children:[Object(D.jsx)("div",{className:r.paymentOptionLogoContainer,children:Object(D.jsx)("img",{className:r.paymentOptionLogo,src:t.logoUrl,alt:"Logo for ".concat(t.name)})}),Object(D.jsxs)(j.a,{variant:"body1",children:[Object(D.jsx)(ht,{message:t.name,maxCharLength:12})," (".concat(t.symbol,")")]})]},t.publicKey.toString())}))]})]})]})}),Object(D.jsxs)("div",{className:r.buySection,children:[Object(D.jsx)(_t,{variant:"contained",className:r.mainButton,onClick:$,disabled:0===B||t.totalTickets+B>se.a||!q||d,children:Object(D.jsx)("div",{className:r.purchaseButtonContent,children:d?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:r.purchaseButtonContentLeft,children:Object(D.jsx)(h.a,{size:20,className:r.purchaseSpinner})}),Object(D.jsx)("div",{className:r.purchaseButtonContentMiddle,children:"Processing..."}),Object(D.jsx)("div",{className:r.purchaseButtonContentRight})]}):Object(D.jsxs)(D.Fragment,{children:["Buy ticket ",!V&&"(Insufficient SOL)"]})})}),Object(D.jsxs)("div",{className:r.walletBalance,children:["Wallet balance:"," ",Q?Object(K.c)(Q.amount||new P.u64(0),N.mint):0," ",N.mint.symbol]})]})]})},Xt=Object(A.a)((function(e){return{root:{width:"100%",height:"inherit",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},actionTagline:{width:"100%",marginBottom:"20px"},textHighlight:{fontWeight:"bold",color:e.palette.secondary.main,marginBottom:"10px"},topSection:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},raffleTitle:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center",justifyItems:"space-between"},leftTitleSection:{width:"10%",display:"flex"},middleTitleSection:{width:"90%",display:"flex",justifyContent:"center",textAlign:"center"},rightTitleSection:{width:"10%"},backButton:{color:e.palette.common.black,backgroundColor:Object(ze.a)(e.palette.secondary.main,.8),"&:hover":{boxShadow:"0px 0px 5px ".concat(e.palette.secondary.main,", inset 0px 0px 5px ").concat(e.palette.secondary.main),backgroundColor:Object(ze.a)(e.palette.secondary.main,.8)}},countdown:function(t){return{width:"100%",display:"flex",justifyContent:"center",marginTop:"10px",fontSize:t.device===M.Phone?"32px":"60px",color:"white",WebkitTextStrokeWidth:"1px",WebkitTextStrokeColor:e.palette.secondary.main,textShadow:"0 0 10px ".concat(e.palette.secondary.main)}},mainContent:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-end"},prizesSection:{width:"70%",display:"flex",flexDirection:"column",paddingRight:"20px",minHeight:"450px",justifyContent:"center",alignItems:"center"},prizesHeader:{marginBottom:"10px"},labelPrizeAmount:{marginLeft:"5px",color:e.palette.secondary.main,textTransform:"initial","&:hover":{textShadow:"0px 0px 5px ".concat(e.palette.secondary.main),backgroundColor:"transparent",textDecoration:"none"}},seeAllPrizesLabel:{},detailsSection:function(e){var t=e.device;return{paddingTop:"20px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",width:"30%",minWidth:t===M.Phone?"256px":"313px",maxWidth:(M.Phone,"380px"),maxHeight:"500px"}},actionSectionContainer:{padding:"20px 0 20px 0"},actionSectionInner:{padding:"10px 0",width:"90%",textAlign:"center"},connectToBuyButton:{width:"80%",height:"40px"},scrollIcon:{color:e.palette.common.white,transform:"rotate(90deg)",fontSize:"50px",opacity:"0.6",marginTop:"20px",marginBottom:"60px"},spacer:{width:"100%",height:"20px"}}})),Zt=Object(A.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},prizesGrid:{scrollMargin:"130px",display:"flex",width:"100%",marginTop:"5px"},prizeItem:function(e){return{marginBottom:e.device===M.Phone?"10px":"30px"}}}})),$t=function(e){var t=e.raffle,n=e.scrollRef,r=G().device,a=Object(g.a)(Object(g.a)({},it()),Zt({device:r}));return Object(i.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(D.jsx)("div",{className:a.root,children:Object(D.jsx)(b.a,{ref:n,container:!0,justifyContent:"space-between",direction:r===M.Phone?"column":"row",className:a.prizesGrid,children:t.prizes.map((function(e,t){return Object(D.jsx)(b.a,{item:!0,children:Object(D.jsx)(Bt,{className:a.prizeItem,prize:e,index:t},t)})}))})})},en=function(e){var t,n=e.raffle,r=e.updateRaffle,a=G().device,c=Object(g.a)(Object(g.a)({},it()),Xt({device:a})),o=Object(u.f)().push,s=ae().draffleClient,l=Object(i.useRef)(null),d=Object(i.useMemo)((function(){var e;if(null===(e=s.provider.wallet)||void 0===e?void 0:e.publicKey)return null===n||void 0===n?void 0:n.entrants.get(s.provider.wallet.publicKey.toString())}),[n,null===(t=s.provider.wallet)||void 0===t?void 0:t.publicKey]);return n?Object(D.jsx)("div",{className:c.root,children:a===M.Phone?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"h1",children:"> ".concat(n.metadata.name)}),Object(D.jsx)("div",{className:c.countdown,children:Object(D.jsx)(E,{endTimestamp:n.endTimestamp,spacing:"5%"})}),Object(D.jsx)(pt,{raffle:n,userConnected:!!s.provider.wallet.publicKey,userTickets:null===d||void 0===d?void 0:d.tickets}),Object(D.jsx)("div",{className:c.spacer}),Object(D.jsx)(j.a,{variant:"overline",children:"Prizes"}),Object(D.jsx)($t,{raffle:n,scrollRef:l}),Object(D.jsx)("div",{className:c.spacer}),s.provider.wallet.publicKey?Object(D.jsx)(qt,{raffle:n,updateRaffle:r}):Object(D.jsx)(tn,{}),Object(D.jsx)("div",{className:c.spacer})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:c.topSection,children:[Object(D.jsxs)("div",{className:c.raffleTitle,children:[Object(D.jsx)("div",{className:c.leftTitleSection,children:Object(D.jsx)(S.a,{size:"medium",className:c.backButton,onClick:function(){return o(p.RAFFLES)},children:Object(D.jsx)(Ze.a,{})})}),Object(D.jsx)("div",{className:c.middleTitleSection,children:Object(D.jsx)(j.a,{variant:"h1",children:"> ".concat(n.metadata.name)})}),Object(D.jsx)("div",{className:c.rightTitleSection})]}),Object(D.jsx)("div",{className:c.countdown,children:Object(D.jsx)(E,{endTimestamp:n.endTimestamp,spacing:"5%"})})]}),Object(D.jsxs)("div",{className:c.mainContent,children:[Object(D.jsxs)("div",{className:c.prizesSection,children:[Object(D.jsxs)(j.a,{variant:"overline",className:c.prizesHeader,children:["Prizes",n.prizes.length>3&&Object(D.jsxs)(D.Fragment,{children:[" -",Object(D.jsx)(Be.a,{className:c.labelPrizeAmount,variant:"text",disableRipple:!0,onClick:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},children:Object(D.jsxs)("span",{children:["See all ",n.prizes.length]})})]})]}),Object(D.jsx)(Et,{prizes:n.prizes})]}),Object(D.jsxs)("div",{className:c.detailsSection,children:[Object(D.jsx)(pt,{raffle:n,userConnected:!!s.provider.wallet.publicKey,userTickets:null===d||void 0===d?void 0:d.tickets}),Object(D.jsx)("div",{className:c.actionSectionContainer,children:s.provider.wallet.publicKey?Object(D.jsx)(qt,{raffle:n,updateRaffle:r}):Object(D.jsx)(tn,{})})]})]}),n.prizes.length>3&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)($e.a,{className:c.scrollIcon}),Object(D.jsx)($t,{raffle:n,scrollRef:l})]})]})}):null},tn=function(){var e=G().device,t=Object(g.a)(Object(g.a)({},it()),Xt({device:e}));return Object(D.jsx)("div",{className:t.actionSection,children:Object(D.jsxs)("div",{className:t.actionSectionInner,children:[Object(D.jsxs)("div",{className:t.actionTagline,children:[Object(D.jsx)(j.a,{variant:"h3",className:t.textHighlight,children:"Tickets are still available."}),Object(D.jsx)(j.a,{variant:"body1",children:"Don't miss out!"})]}),Object(D.jsx)(Pe.b,{variant:"outlined",color:"secondary",className:"".concat(t.mainButton," ").concat(t.connectToBuyButton),children:"Connect to buy"})]})})},nn=function(e){var t=Object(u.f)().push;return Object(D.jsx)(We,{onBackNavigation:function(){return t(p.RAFFLES)},children:Object(D.jsx)(en,Object(g.a)({},e))})},rn=function(){var e=Object(u.h)().id,t=je(),n=t.raffles,r=t.updateRaffleById,a=Object(i.useState)(),c=Object(f.a)(a,2),o=c[0],s=c[1],l=Object(i.useCallback)((function(){r&&r(e)}),[e,r]);Object(i.useEffect)((function(){l();var e=setInterval(l,5e3);return function(){return clearInterval(e)}}),[l]),Object(i.useEffect)((function(){n.has(e)&&s(n.get(e))}),[n,e]);var d=Object(i.useMemo)((function(){return o&&new Date>o.endTimestamp}),[o]);return o?d?Object(D.jsx)(Rt,{raffle:o,updateRaffle:l}):Object(D.jsx)(nn,{raffle:o,updateRaffle:l}):null},an=n(733),cn=n.p+"static/media/discord-logo.9a823ca6.svg",on=n.p+"static/media/twitter-logo.8097ca9d.svg",sn=Object(A.a)((function(e){return{root:function(e){return{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",margin:e.device===M.Phone?"20px 0":"-20px 0"}},socialLinksContainer:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"30px"},socialLinkContainer:function(e){return{height:"50px",width:"80px",margin:e.device===M.Phone?"0 5px":"0 20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},socialLink:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},buttonContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"30px",width:"250px"}}}));n(519);var ln,un=function(){var e=G().device,t=Object(g.a)(Object(g.a)({},it()),sn({device:e})),n=Object(u.f)().push;return Object(D.jsxs)("div",{className:t.root,children:[Object(D.jsx)("img",{className:e===M.Phone?"banner-small":"banner",src:"banner.png",alt:"Site banner",width:e===M.Phone?"280px":"600px"}),Object(D.jsxs)("div",{className:t.socialLinksContainer,children:[Object(D.jsx)("div",{className:t.socialLinkContainer,children:Object(D.jsx)(k.a,{title:"Discord",placement:"top",children:Object(D.jsx)(an.a,{className:t.socialLink,target:"blank",href:"http://discord.gg/ghostkiddao",children:Object(D.jsx)("img",{src:cn,alt:"disord-logo",width:"50px"})})})}),Object(D.jsx)("div",{className:t.socialLinkContainer,children:Object(D.jsx)(k.a,{title:"Twitter",placement:"top",children:Object(D.jsx)(an.a,{className:t.socialLink,target:"blank",href:"https://twitter.com/GhostKidDAO",children:Object(D.jsx)("img",{src:on,alt:"twitter-logo",width:"50px"})})})})]}),Object(D.jsx)("div",{className:t.buttonContainer,children:Object(D.jsx)(Be.a,{variant:"outlined",color:"secondary",size:"large",onClick:function(){return n(p.RAFFLES)},className:t.mainButton,children:"Explore raffles"})})]})},dn=function(){return Object(D.jsx)(We,{children:Object(D.jsx)(un,{})})},pn=n(734),mn=n(49),fn=n.n(mn),jn=Object(A.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",width:"100%"},raffleGrid:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},raffleGridItem:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},raffleCard:{width:"180px",height:"150px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},walletButtonContainer:{margin:"20px 0 0 0"}}})),bn=function(){var e=jn(),t=Object(x.e)().connected,n=Object(u.f)().push,r=je(),a=r.raffles,c=r.fetchAllRaffles,o=ae().dispenserClient,s=Object(i.useState)([]),l=Object(f.a)(s,2),d=l[0],h=l[1];return Object(i.useEffect)((function(){c(!0)}),[c]),Object(i.useEffect)((function(){o.account.registry.all().then(h)}),[o,h]),Object(D.jsx)("div",{className:e.root,children:t?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(D.jsx)(j.a,{variant:"h3",children:"Dispensers"}),Object(D.jsx)(S.a,{size:"small",onClick:function(){o.rpc.createRegistry(new fn.a(5e8),new fn.a(1e6),{accounts:{registry:ne.b,vaultTokenIn:Ke.b,vaultTokenOut:Ke.c,admin:o.provider.wallet.publicKey,mintTokenIn:new J.PublicKey("So11111111111111111111111111111111111111112"),mintTokenOut:new J.PublicKey("zRpVjG5wMWrNhpTtSiGMz9iBaMTQDdaVGCFLmYqCs4U"),tokenProgram:P.TOKEN_PROGRAM_ID,systemProgram:J.SystemProgram.programId,rent:J.SYSVAR_RENT_PUBKEY},signers:[ne.c]}).then((function(e){return console.log(e)}))},children:Object(D.jsx)(pn.a,{className:e.scrollButtonIcon})})]}),Object(D.jsx)(wt,{height:"20px"}),0===d.length?Object(D.jsx)(D.Fragment,{children:"No dispenser found."}):Object(D.jsx)(b.a,{container:!0,spacing:1,className:e.raffleGrid,children:d.map((function(t){return Object(D.jsx)(b.a,{item:!0,xs:3,spacing:3,className:e.raffleGridItem,children:Object(D.jsxs)(v.a,{className:e.raffleCard,children:[Object(D.jsxs)(j.a,{children:["Admin: ",z(t.account.admin)]}),Object(D.jsxs)(j.a,{children:["In: ",z(t.account.mintTokenIn)]}),Object(D.jsxs)(j.a,{children:["->"," Vault:"," ",z(t.account.vaultTokenIn)]}),Object(D.jsxs)(j.a,{children:["Out: ",z(t.account.mintTokenOut)]}),Object(D.jsxs)(j.a,{children:["->"," Vault:"," ",z(t.account.vaultTokenOut)]})]})},t.publicKey.toString())}))}),Object(D.jsx)(wt,{height:"20px"}),Object(D.jsx)(j.a,{variant:"h3",children:"Ongoing raffles"}),Object(D.jsx)(wt,{height:"20px"}),Object(D.jsx)(b.a,{container:!0,spacing:1,className:e.raffleGrid,children:Object(m.a)(a.values()).filter((function(e){return new Date<=e.endTimestamp})).map((function(t){return Object(D.jsx)(b.a,{item:!0,xs:3,spacing:3,className:e.raffleGridItem,children:Object(D.jsxs)(v.a,{className:e.raffleCard,onClick:function(){return n("".concat(p.ADMIN.RAFFLES,"/").concat(t.publicKey))},children:[Object(D.jsx)(j.a,{children:t.metadata.name}),Object(D.jsx)(j.a,{children:Object(D.jsx)(j.a,{children:t.endTimestamp.toISOString()})})]})})}))}),Object(D.jsx)(wt,{height:"50px"}),Object(D.jsx)(j.a,{variant:"h3",children:"Ended raffles"}),Object(D.jsx)(wt,{height:"20px"}),Object(D.jsx)(b.a,{container:!0,spacing:1,className:e.raffleGrid,children:Object(m.a)(a.values()).filter((function(e){return new Date>e.endTimestamp})).map((function(t){return Object(D.jsx)(b.a,{item:!0,xs:3,spacing:3,className:e.raffleGridItem,children:Object(D.jsxs)(v.a,{className:e.raffleCard,onClick:function(){return n("".concat(p.ADMIN.RAFFLES,"/").concat(t.publicKey))},children:[Object(D.jsx)(j.a,{children:t.metadata.name}),Object(D.jsx)(j.a,{children:t.endTimestamp.toISOString()})]})},t.publicKey.toString())}))})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(j.a,{variant:"h3",children:"Connect with an admin wallet to unlock admin panel"}),Object(D.jsx)("div",{className:e.walletButtonContainer,children:Object(D.jsx)(Re,{})})]})})},hn=function(){return Object(D.jsx)(We,{children:Object(D.jsx)(bn,{})})},xn=n(735),gn=Object(A.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",width:"100%"},headerContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},entrantRow:{display:"flex",flexDirection:"row",justifyContent:"center"},walletButtonContainer:{margin:"20px 0 0 0"}}})),On=function(){var e=gn(),t=Object(u.h)().id,n=je(),r=n.raffles,a=n.updateRaffleById,c=ae().draffleClient,o=Object(i.useState)(),s=Object(f.a)(o,2),l=s[0],d=s[1],p=Object(i.useState)(!1),b=Object(f.a)(p,2),h=b[0],x=b[1];Object(i.useEffect)((function(){var e=r.get(t);e&&d(e)}),[r,t]);var g=Object(i.useCallback)(Object(Y.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$((function(){return c.rpc.revealWinners({accounts:{raffle:t,recentBlockhashes:J.SYSVAR_RECENT_BLOCKHASHES_PUBKEY}})}),"Raffle revealed");case 2:case"end":return e.stop()}}),e)}))),[c,t]);return h?Object(D.jsx)("div",{className:e.root,children:Object(D.jsx)(j.a,{variant:"h3",children:"Loading..."})}):l?Object(D.jsxs)("div",{className:e.root,children:[l?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:e.headerContainer,children:[Object(D.jsxs)(j.a,{variant:"h3",children:["Entrants list (total ",l.entrants.size,")"]}),Object(D.jsx)(S.a,{onClick:function(){x(!0),a(t),x(!1)},children:Object(D.jsx)(xn.a,{})}),Object(D.jsx)(Be.a,{onClick:g,variant:"contained",children:"Reveal winners"})]}),Object(D.jsx)(wt,{height:"20px"}),Object(m.a)(l.entrants.entries()).map((function(t){var n=Object(f.a)(t,2),i=n[0],r=n[1];return Object(D.jsxs)("div",{className:e.entrantRow,children:[Object(D.jsxs)(j.a,{variant:"body1",children:[i,": "]}),Object(D.jsx)(j.a,{variant:"body1",children:r.tickets.toString()})]},i)}))]}):Object(D.jsx)(j.a,{variant:"h3",children:"No entrants"}),Object(D.jsx)(wt,{height:"50px"})]}):null},vn=function(){return Object(D.jsx)(We,{children:Object(D.jsx)(On,{})})},yn=function(){return Object(D.jsxs)(u.c,{children:[Object(D.jsx)(u.a,{path:"/",exact:!0,component:dn}),Object(D.jsx)(u.a,{path:"".concat(p.RAFFLES,"/:id"),component:rn}),Object(D.jsx)(u.a,{path:p.RAFFLES,exact:!0,component:qe}),Object(D.jsx)(u.a,{path:p.ADMIN.HOME,exact:!0,component:hn}),Object(D.jsx)(u.a,{path:"".concat(p.ADMIN.RAFFLES,"/:id"),exact:!0,component:vn})]})},wn=n(736),kn=n(415),Sn="#9b51ff",Nn="#01ffa3",Cn=function(e){var t=e.device;return Object(kn.a)({typography:{allVariants:{color:"#FFF",fontFamily:"Kdam Thmor Pro"},h1:{color:Sn,textAlign:"center",fontSize:t===M.Phone?"20px":"40px"},h2:{color:Nn,fontWeight:"bold",fontSize:t===M.Phone?"18px":"25px"},h3:{color:Nn,fontWeight:"bold",fontSize:t===M.Phone?"15px":"16px"},h4:{color:"white",fontSize:(M.Phone,"20px")},body1:{fontSize:(M.Phone,"14px")},overline:{color:"#999",fontSize:t===M.Phone?"12px":"13px"},caption:{fontSize:t===M.Phone?"16x":"16px"}},palette:{type:"dark",background:{paper:"#212225",default:"linear-gradient(0deg, rgba(57,9,74,1) 0%, rgba(6,18,98,1) 100%, rgba(57,9,74,1) 100%);"},primary:{main:Sn},secondary:{main:Nn},grey:{500:"#777"}}})},In=function(e){var t=e.children,n=G().device;return Object(D.jsx)(wn.a,{theme:Cn({device:n}),children:t})},Tn=n(164);!function(e){e.Localnet="localnet"}(ln||(ln={}));var Pn=function(e){var t=e.children,n=ln.Localnet,r=Object(i.useMemo)((function(){return function(e){return e===ln.Localnet?"https://api.mainnet-beta.solana.com/":Object(J.clusterApiUrl)(e)}(n)}),[n]),a=Object(i.useMemo)((function(){return[Object(Tn.a)(),Object(Tn.c)(),Object(Tn.b)(),Object(Tn.e)({network:n}),Object(Tn.d)({network:n})]}),[n]),c=Object(i.useCallback)((function(e){l.b.error(e.message?"".concat(e.name,": ").concat(e.message):e.name),console.error(e)}),[]);return Object(D.jsx)(x.a,{endpoint:r,children:Object(D.jsx)(x.b,{wallets:a,onError:c,autoConnect:!0,children:Object(D.jsx)(Pe.a,{featuredWallets:5,children:t})})})},zn=n(719),Mn=n(737),Rn=Object(A.a)((function(e){return{root:function(e){var t=e.device;return{position:"fixed",bottom:t===M.Phone?20:30,right:t===M.Phone?20:30}},scrollButton:{color:e.palette.common.black,backgroundColor:e.palette.secondary.main,"&:hover":{boxShadow:"0px 0px 10px ".concat(e.palette.secondary.main,", inset 0px 0px 5px ").concat(e.palette.secondary.main),backgroundColor:e.palette.secondary.main}},scrollButtonIcon:{transform:"rotate(-90deg)"}}})),An=function(){var e=G().device,t=Rn({device:e}),n=Object(i.useState)(!1),r=Object(f.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){var e=function(){window.pageYOffset>100?c(!0):c(!1)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[]),Object(D.jsx)("div",{className:t.root,children:Object(D.jsx)(zn.a,{direction:"up",in:a,children:Object(D.jsx)(S.a,{size:"medium",className:t.scrollButton,onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:Object(D.jsx)(Mn.a,{className:t.scrollButtonIcon})})})})},Bn=(n(667),function(){return Object(D.jsxs)(U,{children:[Object(D.jsx)(o.a,{}),Object(D.jsx)(In,{children:Object(D.jsx)(s.a,{children:Object(D.jsx)(Pn,{children:Object(D.jsx)(re,{children:Object(D.jsxs)(fe,{children:[Object(D.jsx)(yn,{}),Object(D.jsx)(l.a,{position:"bottom-left",reverseOrder:!1,toastOptions:{duration:5e3}}),Object(D.jsx)(An,{})]})})})})})]})}),Dn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,747)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};c.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(Bn,{})}),document.getElementById("root")),Dn()},68:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p}));var i=n(1),r=n.n(i),a=n(4),c=(n(76),n(110)),o=n(32),s=n(672),l=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wallet.publicKey){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.connection.getAccountInfo(t.wallet.publicKey);case 4:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.lamports);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(r.a.mark((function e(t,n){var i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Token.getAssociatedTokenAddress(o.ASSOCIATED_TOKEN_PROGRAM_ID,o.TOKEN_PROGRAM_ID,n,t.wallet.publicKey);case 2:return i=e.sent,e.prev=3,e.next=6,Object(c.getTokenAccount)(t,i);case 6:return a=e.sent,e.abrupt("return",a.amount);case 10:return e.prev=10,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(e,t){return s.a(e.toString()).div(Math.pow(10,t.decimals)).toString()},p=function(e,t,n){return o.Token.createAssociatedTokenAccountInstruction(o.ASSOCIATED_TOKEN_PROGRAM_ID,o.TOKEN_PROGRAM_ID,e,t,n,n)}},77:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o}));var i=n(21),r="booqMjRUb2RbHt2HiSX1YgykWgCJhZWfFdnMsVztQU2",a=new i.PublicKey("B2jCF3V3hCCPcwsXPtjMhXVjzafXU68EMJWz3eKZ2kVa"),c=i.Keypair.fromSecretKey(new Uint8Array(JSON.parse("[35,47,18,50,28,119,80,186,159,159,145,243,214,163,99,71,228,6,163,152,124,159,91,101,153,69,149,48,78,9,205,113,105,1,228,23,232,110,138,220,28,135,207,11,98,69,154,41,151,134,243,115,35,76,231,98,131,83,27,108,112,5,57,42]"))),o=c.publicKey},79:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var i="So11111111111111111111111111111111111111112",r={So11111111111111111111111111111111111111112:{chainId:101,address:i,symbol:"SOL",name:"SOL",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",tags:[],extensions:{website:"https://solana.com/",serumV3Usdc:"9wFFyRfZBsuAha4YcuxcXLKwMxJR43S7fPfQLusDBzvT",serumV3Usdt:"HWHvQhFmJB3NUcu1aihKmrKegfVxBEHzwVX6yZCKEsi1",coingeckoId:"solana",imageURI:"/resources/solana-logo.gif"}},boooCKXQn9YTK2aqN5pWftQeb9TH7cj7iUKuVCShWQx:{chainId:101,address:"boooCKXQn9YTK2aqN5pWftQeb9TH7cj7iUKuVCShWQx",symbol:"$BOO",name:"$BOO",decimals:9,logoURI:"/resources/logo.png",tags:[]},tDWgfue1v4JNMHmgxi7Qd2xzNpLhGFhaghcwAvnsYsv:{chainId:101,address:"tDWgfue1v4JNMHmgxi7Qd2xzNpLhGFhaghcwAvnsYsv",symbol:"tDWOS",name:"$t",decimals:4,logoURI:"/resources/tdwos.png",tags:[]},gDWFpMSB8JFVn4NNjiP9Y9EfKTtJ3M5dpUusKuS4mFn:{chainId:101,address:"gDWFpMSB8JFVn4NNjiP9Y9EfKTtJ3M5dpUusKuS4mFn",symbol:"gDWOS",name:"$g",decimals:4,logoURI:"/resources/gdwos.png",tags:[]},SKu11EypaFU3gvr8VSAbi13zEC2CPvqbz9s83N3tWHM:{chainId:101,address:"SKu11EypaFU3gvr8VSAbi13zEC2CPvqbz9s83N3tWHM",symbol:"SKULL",name:"Skeleton Crew",decimals:0,logoURI:"/resources/skull.png",tags:[]}},a=new Map(Object.entries(r)),c={chainId:101,symbol:"???",name:"Unkown token",decimals:0,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/9nusLQeFKiocswDt6NQsiErm1M43H2b8x6v5onhivqKv/logo.png",tags:[],extensions:{}}}},[[668,1,2]]]);
//# sourceMappingURL=main.ed7224eb.chunk.js.map